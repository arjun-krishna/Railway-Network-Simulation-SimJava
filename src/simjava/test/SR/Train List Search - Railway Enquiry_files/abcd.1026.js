var tb_initialized;$(document).ready(function(){tb_initialized||(tb_initialized=1,tb_init("a.thickbox, area.thickbox, input.thickbox"))});function tb_init(a){$(a).click(function(){var a=$(this).attr("title2");tb_show(a,this.href||this.alt,this.rel||!1);this.blur();return!1})}
function tb_show(a,b,c){try{"undefined"===typeof document.body.style.maxHeight?($("body","html").css({height:"100%",width:"100%"}),$("html").css("overflow","hidden"),null===document.getElementById("TB_HideSelect")&&($("body").append("<iframe id='TB_HideSelect'></iframe><div id='TB_overlay'></div><div id='TB_window'></div>"),$("#TB_overlay").click(tb_remove))):null===document.getElementById("TB_overlay")&&($("body").append("<div id='TB_overlay'></div><div id='TB_window'></div>"),$("#TB_overlay").click(tb_remove));
tb_detectMacXFF()?$("#TB_overlay").addClass("TB_overlayMacFFBGHack"):$("#TB_overlay").addClass("TB_overlayBG");null===a&&(a="");var d=/\.jpg$|\.jpeg$|\.png$|\.gif$|\.bmp$/,e=(-1!==b.indexOf("?")?b.substr(0,b.indexOf("?")):b).toLowerCase().match(d);if(".jpg"==e||".jpeg"==e||".png"==e||".gif"==e||".bmp"==e){TB_imageCount=TB_NextHTML=TB_NextURL=TB_NextCaption=TB_PrevHTML=TB_PrevURL=TB_PrevCaption="";TB_FoundURL=!1;if(c)for(TB_TempArray=$("a[rel="+c+"]").get(),TB_Counter=0;TB_Counter<TB_TempArray.length&&
""===TB_NextHTML;TB_Counter++)TB_TempArray[TB_Counter].href.toLowerCase().match(d),TB_TempArray[TB_Counter].href!=b?TB_FoundURL?(TB_NextCaption=TB_TempArray[TB_Counter].getAttribute("title2"),TB_NextURL=TB_TempArray[TB_Counter].href,TB_NextHTML="<span id='TB_next'>&nbsp;&nbsp;<a href='#'>Next &gt;</a></span>"):(TB_PrevCaption=TB_TempArray[TB_Counter].getAttribute("title2"),TB_PrevURL=TB_TempArray[TB_Counter].href,TB_PrevHTML="<span id='TB_prev'>&nbsp;&nbsp;<a href='#'>&lt; Prev</a></span>"):(TB_FoundURL=
!0,TB_imageCount="Image "+(TB_Counter+1)+" of "+TB_TempArray.length);imgPreloader=new Image;imgPreloader.onload=function(){imgPreloader.onload=null;var d=tb_getPageSize(),e=d[0]-35,d=d[1]-35,f=imgPreloader.width,g=imgPreloader.height;f>e?(g*=e/f,f=e,g>d&&(f*=d/g,g=d)):g>d&&(f*=d/g,g=d,f>e&&(g*=e/f,f=e));TB_WIDTH=f+10;TB_HEIGHT=d;""==TB_imageCount?$("#TB_window").append("<div id='TB_closeWindow'><a href='"+b+"' target='_blank' id='TB_fullPicButton' title='Full Picture'>&nbsp;&#9723;</a><a href='#' id='TB_closeWindowButton' title='Close'>&nbsp;&times;</a></div><div class='TB_imgComp'><div id='TB_caption'>"+
a+"</div><a href='' id='TB_ImageOff' title='Close'><div style=\"clear:both;\"></div><img id='TB_Image' src='"+b+"' width='"+f+"' height='"+g+"' alt='"+a+"'/><br /></a></div>"):($("#TB_window .TB_imgComp").remove(),$("#TB_window").append("<div class='TB_imgComp'><div id='TB_closeWindow'><a href='"+b+"' target='_blank' id='TB_fullPicButton' title='Full Picture'>&nbsp;&#9723;</a><a href='#' id='TB_closeWindowButton' title='Close'>&nbsp;&times;</a></div><div id='TB_secondLine'>"+TB_imageCount+TB_PrevHTML+
TB_NextHTML+"</div><div id='TB_caption2'>"+a+"</div><a href='' id='TB_ImageOff' title='Close'><div style=\"clear:both;\"></div><img id='TB_Image' src='"+b+"' width='"+f+"' height='"+g+"' alt='"+a+"'/><br /></a></div>"));if(""!==TB_PrevHTML){var h=function(){$(document).unbind("click",h)&&$(document).unbind("click",h);tb_show(TB_PrevCaption,TB_PrevURL,c);return!1};$("#TB_prev").click(h)}if(""!==TB_NextHTML){var k=function(){tb_show(TB_NextCaption,TB_NextURL,c);return!1};$("#TB_next").click(k)}$("#TB_closeWindowButton").click(tb_remove);
document.onkeydown=function(a){keycode=null==a?event.keyCode:a.which;27==keycode?tb_remove():39==keycode?""!=TB_NextHTML&&(document.onkeydown="",k()):37==keycode&&""!=TB_PrevHTML&&(document.onkeydown="",h())};tb_position();$("#TB_load").remove();$("#TB_ImageOff").click(tb_remove);$("#TB_window").css({display:"block"});$("#TB_window .TB_imgComp").fadeIn()};imgPreloader.src=b}else{TB_imageCount=TB_NextHTML=TB_NextURL=TB_NextCaption=TB_PrevHTML=TB_PrevURL=TB_PrevCaption="";TB_FoundURL=!1;if(c)for(TB_TempArray=
$("a[rel="+c+"]").get(),TB_Counter=0;TB_Counter<TB_TempArray.length&&""===TB_NextHTML;TB_Counter++)TB_TempArray[TB_Counter].href.toLowerCase().match(d),TB_TempArray[TB_Counter].href!=b?TB_FoundURL?(TB_NextCaption=TB_TempArray[TB_Counter].getAttribute("title2"),TB_NextURL=TB_TempArray[TB_Counter].href,TB_NextHTML="<span id='TB_next'>&nbsp;&nbsp;<a href='#'>Next &gt;</a></span>"):(TB_PrevCaption=TB_TempArray[TB_Counter].getAttribute("title2"),TB_PrevURL=TB_TempArray[TB_Counter].href,TB_PrevHTML="<span id='TB_prev'>&nbsp;&nbsp;<a href='#'>&lt; Prev</a></span>"):
(TB_FoundURL=!0,TB_imageCount="Image "+(TB_Counter+1)+" of "+TB_TempArray.length);var f=b.replace(/.*#TB_inline/,"#TB_inline"),f=f.replace(/^[^\?]+\??/,""),g=tb_parseQuery(f);TB_WIDTH=1*g.width+30||630;TB_HEIGHT=1*g.height+40||440;ajaxContentW=TB_WIDTH-30;ajaxContentH=TB_HEIGHT-45;if(-1!=b.indexOf("TB_iframe"))urlNoQuery=b.split("TB_"),$("#TB_iframeContent").remove(),"true"!=g.modal?$("#TB_window").append("<div id='TB_title'><div id='TB_ajaxWindowTitle'>"+a+"</div><div id='TB_closeAjaxWindow'><a href='#' id='TB_closeWindowButton' title='Close'>&nbsp;&times;</a></div></div><iframe frameborder='0' hspace='0' src='"+
urlNoQuery[0]+"' id='TB_iframeContent' name='TB_iframeContent"+Math.round(1E3*Math.random())+"' onload='tb_showIframe()' style='width:"+(ajaxContentW+29)+"px;' > </iframe>"):($("#TB_overlay").unbind(),$("#TB_window").append("<iframe frameborder='0' hspace='0' src='"+urlNoQuery[0]+"' id='TB_iframeContent' name='TB_iframeContent"+Math.round(1E3*Math.random())+"' onload='tb_showIframe()' style='width:"+(ajaxContentW+29)+"px'> </iframe>"));else if("block"!=$("#TB_window").css("display"))if("true"!=g.modal){""==
TB_imageCount?$("#TB_window").append("<div id='TB_title'><div id='TB_ajaxWindowTitle'>"+a+"</div><div id='TB_closeAjaxWindow'><a href='#' id='TB_closeWindowButton'>&nbsp;&times;</a></div></div><div id='TB_ajaxContent' style='width:"+ajaxContentW+"px'></div>"):$("#TB_window").append("<div id='TB_title2'><div id='TB_ajaxWindowTitle'>"+a+"<div id='TB_secondLine'>"+TB_imageCount+TB_PrevHTML+TB_NextHTML+"</div></div><div id='TB_closeAjaxWindow'><a href='#' id='TB_closeWindowButton'>&nbsp;&times;</a></div></div><div id='TB_ajaxContent' style='width:"+
ajaxContentW+"px'></div>");if(""!==TB_PrevHTML){var h=function(){$(document).unbind("click",h)&&$(document).unbind("click",h);tb_show(TB_PrevCaption,TB_PrevURL,c);return!1};$("#TB_prev").click(h)}""!==TB_NextHTML&&$("#TB_next").click(function(){tb_show(TB_NextCaption,TB_NextURL,c);return!1})}else $("#TB_overlay").unbind(),$("#TB_window").append("<div id='TB_ajaxContent' class='TB_modal' style='width:"+ajaxContentW+"px'></div>");else $("#TB_ajaxContent")[0].style.width=ajaxContentW+"px",$("#TB_ajaxContent")[0].style.height=
ajaxContentH+"px",$("#TB_ajaxContent")[0].scrollTop=0,$("#TB_ajaxWindowTitle").html(a);$("#TB_closeWindowButton").click(tb_remove);if(-1!=b.indexOf("TB_inline")){if($("#TB_ajaxContent").append($("#"+g.inlineId).children()),$("#TB_window").unload(function(){$("#"+g.inlineId).append($("#TB_ajaxContent").children())}),tb_position(),$("#TB_load").remove(),$("#TB_window").css({display:"block"}),$("#TB_ajaxContent [mytabindex=1]").length){var k=$("#TB_ajaxContent [mytabindex=1]:first").val();$("#TB_ajaxContent [mytabindex=1]:first").val("");
$("#TB_ajaxContent [mytabindex=1]:first").focus();$("#TB_ajaxContent [mytabindex=1]:first").val(k)}}else-1!=b.indexOf("TB_iframe")?(tb_position(),$.browser.safari&&($("#TB_load").remove(),$("#TB_window").css({display:"block"}))):$("#TB_ajaxContent").load(b+="&random="+(new Date).getTime(),function(){tb_position();$("#TB_load").remove();tb_init("#TB_ajaxContent a.thickbox");$("#TB_window").css({display:"block"});var a=g.afterLoad;a&&""!=a&&eval(a)($("#TB_ajaxContent"))})}g.modal||(document.onkeyup=
function(a){keycode=null==a?event.keyCode:a.which;27==keycode&&tb_remove()})}catch(l){}}function tb_showIframe(){$("#TB_load").remove();$("#TB_window").css({display:"block"})}
function tb_remove(){$("#TB_imageOff").unbind("click");$("#TB_closeWindowButton").unbind("click");$("#TB_window").fadeOut("fast",function(){$("#TB_window,#TB_overlay,#TB_HideSelect").trigger("unload").unbind().remove()});$("#TB_load").remove();"undefined"==typeof document.body.style.maxHeight&&($("body","html").css({height:"auto",width:"auto"}),$("html").css("overflow",""));document.onkeydown="";document.onkeyup="";return!1}
function tb_position(){if(window.self!=window.top){var a=10,b=$(window).scrollTop()+10;$("#TB_window").css({top:"0%",left:"0%",marginLeft:a+"px",width:TB_WIDTH+"px"})}else a=-parseInt(TB_WIDTH/2,10),TB_WIDTH>window.innerWidth&&(a=-parseInt(window.innerWidth/2,10)+10),b=$(window).scrollTop()-parseInt(window.innerHeight/2,10)+30,$("#TB_window").css({marginLeft:a+"px",width:TB_WIDTH+"px"});$("#TB_window").css({marginTop:b+"px"})}
function tb_parseQuery(a){var b={};if(!a)return b;a=a.split(/[;&]/);for(var c=0;c<a.length;c++){var d=a[c].split("=");if(d&&2==d.length){var e=unescape(d[0]),d=unescape(d[1]),d=d.replace(/\+/g," ");b[e]=d}}return b}function tb_getPageSize(){var a=document.documentElement;return arrayPageSize=[window.top.innerWidth||self.innerWidth||a&&a.clientWidth||document.body.clientWidth,window.top.innerHeight||self.innerHeight||a&&a.clientHeight||document.body.clientHeight]}
function tb_detectMacXFF(){var a=navigator.userAgent.toLowerCase();if(-1!=a.indexOf("mac")&&-1!=a.indexOf("firefox"))return!0}var Recorder;
function initRecorder(){var a=new Worker("/kjfdsuiemjvcyc/mp3Worker.min.js");Recorder=function(b,c){function d(a){function b(c,d){for(var e=0,f=0;d;)e+=a[c]<<f,f+=8,c++,d--;return e}if(1!=b(20,2))throw"Invalid compression code, not PCM";if(1!=b(22,2))throw"Invalid number of channels, not 1";return{sampleRate:b(24,4),bitsPerSample:b(34,2),samples:a.subarray(44)}}function e(a){for(var b=new Float32Array(a.length),c=0;c<a.length;c++){var d=a[c<<1]+(a[(c<<1)+1]<<8);32768<=d&&(d|=-32768);b[c]=d/32768}return b}
var f=c||{},g=f.bufferLen||4096;this.context=b.context;this.node=(this.context.createScriptProcessor||this.context.createJavaScriptNode).call(this.context,g,2,2);var h=new Worker(f.workerPath||"/kjfdsuiemjvcyc/recorderWorker.min.js");h.postMessage({command:"init",config:{sampleRate:this.context.sampleRate,numChannels:1}});var k=!1,l;this.node.onaudioprocess=function(a){k&&h.postMessage({command:"record",buffer:[a.inputBuffer.getChannelData(0)]})};this.configure=function(a){for(var b in a)a.hasOwnProperty(b)&&
(f[b]=a[b])};this.record=function(){k=!0};this.stop=function(){k=!1};this.clear=function(){h.postMessage({command:"clear"})};this.getBuffer=function(a){l=a||f.callback;h.postMessage({command:"getBuffer"})};this.exportWAV=function(a,b){l=a||f.callback;b=b||f.type||"audio/wav";if(!l)throw Error("Callback not set");h.postMessage({command:"exportWAV",type:b})};this.exportWAV2=function(b,c){l=c;var f,g=new FileReader;g.onload=function(){f=this.result;var b=new Uint8Array(f),b=d(b);a.postMessage({cmd:"init",
config:{mode:3,channels:1,samplerate:b.sampleRate,bitrate:b.bitsPerSample}});a.postMessage({cmd:"encode",buf:e(b.samples)});a.postMessage({cmd:"finish"});a.onmessage=function(a){"data"==a.data.cmd&&(a=new Blob([new Uint8Array(a.data.buf)],{type:"audio/mp3"}),l(a))}};g.readAsArrayBuffer(b)};h.onmessage=function(a){l(a.data)};b.connect(this.node);this.node.connect(this.context.destination)};window.Recorder=Recorder}
var waltz={wlt:function(a){var b,c={},d,e,f="",g=[],h=256;for(b=0;256>b;b+=1)c[String.fromCharCode(b)]=b;for(b=0;b<a.length;b+=1)d=a.charAt(b),e=f+d,c[e]?f=e:(g.push(c[f]),c[e]=h++,f=String(d));""!==f&&g.push(c[f]);return waltz.btos(g)},wtl:function(a){a=waltz.stob(a);var b,c=[],d,e,f,g="",h=256;for(b=0;256>b;b+=1)c[b]=String.fromCharCode(b);e=d=String.fromCharCode(a[0]);for(b=1;b<a.length;b+=1)f=a[b],c[f]?g=c[f]:f===h&&(g=d+d.charAt(0)),e+=g,c[h++]=d+g.charAt(0),d=g;return e},stob:function(a){for(var b=
Array(Math.ceil(a.length)),c=0;c<b.length;c++)b[c]=a.charCodeAt(c);return b},btos:function(a){for(var b=Array(a.length),c=0;c<a.length;c++)b[c]=String.fromCharCode(a[c]);return b.join("")}},ckee165=document.cookie,prs1ql={pl1fhg:function(a,b){if(0==a.length)return"";var c=prs1ql.strToLongs(Utf8.encode(a));1>=c.length&&(c[1]=0);if(!b){var d=ckee165.indexOf("JSESS");b=ckee165.substring(d+11,d+27)}for(var d=prs1ql.strToLongs(Utf8.encode(b).slice(0,16)),e=c.length,f=c[e-1],g=c[0],h,k=Math.floor(6+52/
e),l=0;0<k--;){l+=2654435769;h=l>>>2&3;for(var n=0;n<e;n++)g=c[(n+1)%e],f=(f>>>5^g<<2)+(g>>>3^f<<4)^(l^g)+(d[n&3^h]^f),c[n]+=f,f=c[n]}c=prs1ql.longsToStr(c);return Base64.encode(c)},pl1fgh:function(a,b){if(!b){var c=ckee165.indexOf("JSESSIONID=");b=ckee165.substring(c+11,c+27)}if(0==a.length)return"";for(var c=prs1ql.strToLongs(Base64.decode(a)),d=prs1ql.strToLongs(Utf8.encode(b).slice(0,16)),e=c.length,f=c[e-1],g=c[0],h,k=2654435769*Math.floor(6+52/e);0!=k;){h=k>>>2&3;for(var l=e-1;0<=l;l--)f=c[0<
l?l-1:e-1],f=(f>>>5^g<<2)+(g>>>3^f<<4)^(k^g)+(d[l&3^h]^f),g=c[l]-=f;k-=2654435769}c=prs1ql.longsToStr(c);c=c.replace(/\0+$/,"");return Utf8.decode(c)},strToLongs:function(a){for(var b=Array(Math.ceil(a.length/4)),c=0;c<b.length;c++)b[c]=a.charCodeAt(4*c)+(a.charCodeAt(4*c+1)<<8)+(a.charCodeAt(4*c+2)<<16)+(a.charCodeAt(4*c+3)<<24);return b},longsToStr:function(a){for(var b=Array(a.length),c=0;c<a.length;c++)b[c]=String.fromCharCode(a[c]&255,a[c]>>>8&255,a[c]>>>16&255,a[c]>>>24&255);return b.join("")}},
Base64={code:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a,b){var c,d,e,f,g=[],h="",k,l,n=Base64.code;l=("undefined"==typeof b?0:b)?Utf8.encode(a):a;k=l.length%3;if(0<k)for(;3>k++;)h+="=",l+="\x00";for(k=0;k<l.length;k+=3)c=l.charCodeAt(k),d=l.charCodeAt(k+1),e=l.charCodeAt(k+2),f=c<<16|d<<8|e,c=f>>18&63,d=f>>12&63,e=f>>6&63,f&=63,g[k/3]=n.charAt(c)+n.charAt(d)+n.charAt(e)+n.charAt(f);g=g.join("");return g=g.slice(0,g.length-h.length)+h},decode:function(a,b){b=
"undefined"==typeof b?!1:b;var c,d,e,f,g,h=[],k,l=Base64.code;k=b?Utf8.decode(a):a;for(var n=0;n<k.length;n+=4)c=l.indexOf(k.charAt(n)),d=l.indexOf(k.charAt(n+1)),f=l.indexOf(k.charAt(n+2)),g=l.indexOf(k.charAt(n+3)),e=c<<18|d<<12|f<<6|g,c=e>>>16&255,d=e>>>8&255,e&=255,h[n/4]=String.fromCharCode(c,d,e),64==g&&(h[n/4]=String.fromCharCode(c,d)),64==f&&(h[n/4]=String.fromCharCode(c));f=h.join("");return b?Utf8.decode(f):f}},Utf8={encode:function(a){a=a.replace(/[\u0080-\u07ff]/g,function(a){a=a.charCodeAt(0);
return String.fromCharCode(192|a>>6,128|a&63)});return a=a.replace(/[\u0800-\uffff]/g,function(a){a=a.charCodeAt(0);return String.fromCharCode(224|a>>12,128|a>>6&63,128|a&63)})},decode:function(a){a=a.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(a){a=(a.charCodeAt(0)&15)<<12|(a.charCodeAt(1)&63)<<6|a.charCodeAt(2)&63;return String.fromCharCode(a)});return a=a.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(a){a=(a.charCodeAt(0)&31)<<6|a.charCodeAt(1)&63;return String.fromCharCode(a)})}};
(function(a){function b(b){return a.data(b,"tooltip")}function c(c){b(this).delay?n=setTimeout(e,b(this).delay):e();p=!!b(this).track;a(document.body).bind("mousemove",f);f(c)}function d(){if(!a.tooltip.blocked&&this!=k&&(this.tooltipText||b(this).bodyHandler)){k=this;l=this.tooltipText;if(b(this).bodyHandler){h.title.hide();var d=b(this).bodyHandler.call(this);d.nodeType||d.jquery?h.body.empty().append(d):h.body.html(d);h.body.show()}else if(b(this).showBody){d=l.split(b(this).showBody);h.title.html(d.shift()).show();
h.body.empty();for(var e=0,f;f=d[e];e++)0<e&&h.body.append("<br/>"),h.body.append(f);h.body.hideWhenEmpty()}else h.title.html(l).show(),h.body.hide();b(this).showURL&&a(this).url()?h.url.html(a(this).url().replace("http://","")).show():h.url.hide();h.parent.addClass(b(this).extraClass);b(this).fixPNG&&h.parent.fixPNG();c.apply(this,arguments)}}function e(){n=null;r&&a.fn.bgiframe||!b(k).fade?h.parent.show():h.parent.is(":animated")?h.parent.stop().show().fadeTo(b(k).fade,k.tOpacity):h.parent.is(":visible")?
h.parent.fadeTo(b(k).fade,k.tOpacity):h.parent.fadeIn(b(k).fade);f()}function f(c){if(!(a.tooltip.blocked||c&&"OPTION"==c.target.tagName))if(!p&&h.parent.is(":visible")&&a(document.body).unbind("mousemove",f),null==k)a(document.body).unbind("mousemove",f);else{h.parent.removeClass("viewport-right").removeClass("viewport-bottom");var d=h.parent[0].offsetLeft,e=h.parent[0].offsetTop;c&&(d=c.pageX+b(k).left,e=c.pageY+b(k).top,c="auto",b(k).positionLeft&&(c=a(window).width()-d,d="auto"),h.parent.css({left:d,
right:c,top:e}));c=a(window).scrollLeft();var g=a(window).scrollTop(),l=a(window).width(),n=a(window).height(),r=h.parent[0];c+l<r.offsetLeft+r.offsetWidth&&(d-=r.offsetWidth+20+b(k).left,h.parent.css({left:d+"px"}).addClass("viewport-right"));g+n<r.offsetTop+r.offsetHeight&&(e-=r.offsetHeight+20+b(k).top,h.parent.css({top:e+"px"}).addClass("viewport-bottom"))}}function g(c){function d(){h.parent.removeClass(e.extraClass).hide().css("opacity","")}if(!a.tooltip.blocked){n&&clearTimeout(n);k=null;var e=
b(this);r&&a.fn.bgiframe||!e.fade?d():h.parent.is(":animated")?h.parent.stop().fadeTo(e.fade,0,d):h.parent.stop().fadeOut(e.fade,d);b(this).fixPNG&&h.parent.unfixPNG()}}var h={},k,l,n,r=null,p=!1;a.tooltip={blocked:!1,defaults:{delay:200,fade:!1,showURL:!0,extraClass:"",top:15,left:15,id:"tooltip"},block:function(){a.tooltip.blocked=!a.tooltip.blocked}};a.fn.extend({tooltip:function(b){b=a.extend({},a.tooltip.defaults,b);h.parent||(h.parent=a('<div id="'+b.id+'"><h3></h3><div class="body"></div><div class="url"></div></div>').appendTo(document.body).hide(),
a.fn.bgiframe&&h.parent.bgiframe(),h.title=a("h3",h.parent),h.body=a("div.body",h.parent),h.url=a("div.url",h.parent));return this.each(function(){a.data(this,"tooltip",b);this.tOpacity=h.parent.css("opacity");var c=a(this).attr("title1");c?this.tooltipText=c:(this.tooltipText=this.title,a(this).attr("title1",this.title).attr("title",""));this.alt=""}).mouseover(d).mouseout(g).click(g)},fixPNG:function(){return this},unfixPNG:function(){return this},hideWhenEmpty:function(){return this.each(function(){a(this)[a(this).html()?
"show":"hide"]()})},url:function(){return this.attr("href")||this.attr("src")}})})(jQuery);function myParseDate(a){a=a.split(/[.'\-_/\, ]+/g,3);return 2>a.length?"":myParseDateGetYear(a)}
function myParseDateGetYear(a){if(3==a.length){if(/[0-9]{4,4}/.exec(a[0]))return myParseDateGetMonthAndDay(a[2],a[1])+", "+a[0];70>parseInt(a[2],10)?a[2]="20"+a[2]:70<=parseInt(a[2])&&99>=parseInt(a[2])&&(a[2]="19"+a[2]);return myParseDateGetMonthAndDay(a[0],a[1])+", "+a[2]}return myParseDateGetMonthAndDay(a[0],a[1])+", "+(new Date).getFullYear()}
function myParseDateGetMonthAndDay(a,b){return/[a-zA-Z]+/.exec(a)?myParseDateConvertMonth(a)+" "+parseInt(b,10):/[a-zA-Z]+/.exec(b)?myParseDateConvertMonth(b)+" "+parseInt(a,10):1<=parseInt(b,10)&&12>=parseInt(b,10)&&1<=parseInt(a,10)&&31>=parseInt(a,10)?myParseDateConvertMonth(b)+" "+parseInt(a,10):1<=parseInt(a,10)&&12>=parseInt(a,10)&&1<=parseInt(b,10)&&31>=parseInt(b,10)?myParseDateConvertMonth(a)+" "+parseInt(b,10):myParseDateConvertMonth("")+" "+(new Date).getDate()}
function myParseDateConvertMonth(a){if(/jan/i.exec(a)||1==parseInt(a,10))return"Jan";if(/feb/i.exec(a)||2==parseInt(a,10))return"Feb";if(/mar/i.exec(a)||3==parseInt(a,10))return"Mar";if(/apr/i.exec(a)||4==parseInt(a,10))return"Apr";if(/may/i.exec(a)||5==parseInt(a,10))return"May";if(/jun/i.exec(a)||6==parseInt(a,10))return"Jun";if(/jul/i.exec(a)||7==parseInt(a,10))return"Jul";if(/aug/i.exec(a)||8==parseInt(a,10))return"Aug";if(/sep/i.exec(a)||9==parseInt(a,10))return"Sep";if(/oct/i.exec(a)||10==parseInt(a,
10))return"Oct";if(/nov/i.exec(a)||11==parseInt(a,10))return"Nov";if(/dec/i.exec(a)||12==parseInt(a,10))return"Dec";a=(new Date).getMonth()+1;return myParseDateConvertMonth(a)}
function myDropDown(a){var b=this;b.span=a;b.baseName=b.span.getAttribute("baseName");b.seq=b.span.getAttribute("seq");b.box=document.getElementById(b.baseName+b.seq+"Box");b.curText=b.box.value;b.content=document.getElementById(b.baseName+b.seq+"Content");b.list=document.getElementById(b.baseName+b.seq+"List");b.label=b.span.getAttribute("label");b.sp=b.span.getAttribute("sp");b.url="/shtml/list.shtml";b.displayAbove=b.span.getAttribute("displayAbove");b.accumulate=b.span.getAttribute("accumulate");
b.freeText=b.span.getAttribute("freeText");b.autoClickButton=b.span.getAttribute("autoClickButton");b.absolutePositioning=b.span.getAttribute("absolutePositioning");b.autoFunction=b.span.getAttribute("autoFunction");b.refID=b.span.getAttribute("refID");b.refRefID=b.span.getAttribute("refRefID");b.highlighted=-1;b.numRows=0;b.numRowsReturned=0;b.page=0;b.runningList=0;b.curListSeqNumber=-1;b.nextListSeqNumber=0;b.pageDnPressed=1;""==$(b.span).find(".stntrncontent").val()?($(b.span).find(".stntrndiv").hide(),
$(b.span).find(".stntrnbox").show()):""==$(b.span).find(".mycontent").val()&&(b.box.value="");$(b.span).find(".stntrndiv div div").click(function(a){$(b.span).find(".stntrndiv").hide();$(b.span).find(".stntrncontent").val("");$(b.span).find(".stntrnbox").show().focus();cancelBubble(a)});""!=b.span.getAttribute("defaultButtonID")?b.defaultButton=document.getElementById(b.span.getAttribute("defaultButtonID")):b.defaultButton=null;document.getElementById(b.baseName+b.seq+"Form")&&(document.getElementById(b.baseName+
b.seq+"Form").onsubmit=function(){"none"==getDisplay(b.list)&&""!=b.content.value?b.defaultButton&&b.defaultButton.click():-1!=b.highlighted?b.useSuggestion():""!=b.box.value&&(b.populateList(),b.box.focus());return!1});b.box.onfocus=function(a){a=$(b.box);a.val()==b.label&&a.val("");a.removeClass("blurtextbox").addClass("focustextbox").css("background-color","")};b.box.onclick=function(a){if(""!=b.box.value&&b.box.value!=b.label||""!=b.refID&&"0"!=b.refID||""!=b.refRefID)b.page=0,b.runningList=1,
b.populateList(),b.box.select()};b.box.onblur=function(a){"FromStn"!=b.baseName&&"ToStn"!=b.baseName&&"Trn"!=b.baseName&&(a=$("#"+b.baseName+b.seq+"Box"),""==a.val()&&a.val(b.label),a.val()==b.label?(a.removeClass("focustextbox").addClass("blurtextbox").css("background-color",""),$("#"+b.baseName+b.seq+"Content").val("")):a.removeClass("blurtextbox").addClass("focustextbox").css("background-color",""))};$("#"+b.baseName+"Box,#"+b.baseName+"List").mouseenter(function(a){$("#"+b.baseName+"Span").attr("left",
0)});$("#"+b.baseName+"Box,#"+b.baseName+"List").mouseleave(function(a){$("#"+b.baseName+"Span").attr("left",1);setTimeout(function(){1==$("#"+b.baseName+"Span").attr("left")&&(b.cancelHideMyDropDown(),cancelBubble(a))},50)});b.box.onkeydown=function(a){if($("#"+b.baseName+b.seq+"Form").length||13!=getEvent(a).keyCode)b.boxonkeydown(a);else return b.useSuggestion(),!1;cancelBubble(a)};b.box.onkeyup=function(a){b.boxonkeyup(a);cancelBubble(a)}}
myDropDown.prototype.pageUp=function(){this.page--;this.highlighted=-1;this.pageDnPressed=0;this.populateList()};myDropDown.prototype.pageDn=function(){this.page++;this.highlighted=-1;this.pageDnPressed=1;this.populateList()};
myDropDown.prototype.useSuggestion=function(){if("FromStn"==this.baseName||"ToStn"==this.baseName||"Trn"==this.baseName)if(-1<this.highlighted&&this.highlighted<this.numRows){var a=this.listTableSel.find(".rowM1[rowNum="+this.highlighted+"]").get(0);this.content.value=a.cells[0].innerHTML.replace(/&amp;/i,"&");this.content.setAttribute("text",a.cells[4].innerHTML.replace(/&amp;/i,"&"));this.box.value=a.cells[4].innerHTML.replace(/&amp;/i,"&");$(this.span).find(".stntrntxt").html(this.box.value.substring(0,
20));$(this.span).find("caption").html(this.box.value);$(this.span).find(".stntrndiv").show();this.highlighted=-1;displayNone(this.list);this.curText=this.box.value="";this.box.focus();displayNone(this.box);$(this.span).find(".stntrndiv").focus()}else this.highlighted=-1,displayNone(this.list),this.box.focus();else-1<this.highlighted&&this.highlighted<this.numRows&&(a=this.listTableSel.find(".rowM1[rowNum="+this.highlighted+"]").get(0),this.content.value=a.cells[0].innerHTML.replace(/&amp;/i,"&"),
this.content.setAttribute("text",a.cells[4].innerHTML.replace(/&amp;/i,"&")),"0"==this.accumulate?this.box.value=a.cells[4].innerHTML.replace(/&amp;/i,"&"):/^"\S+$/.exec(this.box.value)?(this.box.value=this.box.value.replace(/^"/,""),this.box.value='"'+this.box.value.replace(/^\S+$/,"").replace(/\s+\S+$/," ")+a.cells[4].innerHTML.replace(/&amp;/i,"&")):this.box.value=this.box.value.replace(/^\S+$/,"").replace(/\s+\S+$/," ")+a.cells[4].innerHTML.replace(/&amp;/i,"&")),this.highlighted=-1,displayNone(this.list),
this.box.focus(),"1"==this.autoClickButton?this.defaultButton&&this.defaultButton.click():""!=this.autoFunction&&eval(this.autoFunction+'("'+this.content.id+'","'+this.box.id+'");')};
myDropDown.prototype.showList=function(){var a=this,b;b="Trn"==a.baseName?$("input.stntrnboxmiddle:first").parents("td"):$(a.box);"none"==getDisplay(a.list)&&($(a.list).css("left",b.offset().left+"px"),$(a.list).css("top",b.offset().top+b.outerHeight()+"px"),a.list.style.position="1"==a.absolutePositioning?"absolute":"fixed",displayBlock(a.list),a.list.parentNode!=document.body&&document.body.appendChild(a.list));a.highlighted=-1;a.changeHighlight();$("#"+a.baseName+a.seq+"List tr").mouseover(function(b){a.highlighted=
1*$(this).attr("rowNum");a.changeHighlight()});$("#"+a.baseName+a.seq+"List tr").click(function(b){a.highlighted=1*$(this).attr("rowNum");a.changeHighlight();a.useSuggestion()})};
myDropDown.prototype.populateList=function(a){var b=this;""!=b.refRefID&&(b.refID=$("#"+b.refRefID).val());a=b.box.value.replace(/\/.*/,"").toLowerCase();""==a&&(a=" ");var c=b.url+"?"+b.sp+"/"+a+"/"+b.page+"/"+b.runningList+"/"+b.refID,d=getLS(c);if(d){var e=document.createElement("div");e.innerHTML=d;d=$(e).find(".dropdowntable");null!=d.get(0)?b.numRowsReturned=d.attr("numRows"):b.numRowsReturned=0;"none"!=getDisplay(b.box)&&(0==b.numRowsReturned?(""!=a&&"0"==b.accumulate&&"0"==b.freeText&&(b.box.style.backgroundColor=
"#fbc9cd"),0!=b.page&&(1==b.pageDnPressed?b.page--:b.page++)):(b.list.innerHTML=e.innerHTML,b.listTableSel=$(b.list).find(".dropdowntable"),b.numRows=b.numRowsReturned,b.box.style.backgroundColor="",b.showList(),e=$(b.list).find(".listfooter").get(0),d=e.getElementsByTagName("SPAN"),e.style.cursor="default",d[0].onclick=function(a){b.pageUp();cancelBubble(a)},d[1].onclick=function(a){b.pageDn();cancelBubble(a)}))}else $.get(c+"?",{date:1*new Date,nextListSeqNumber:b.nextListSeqNumber++},function(d){var e=
document.createElement("div");e.innerHTML=d;var h=$(e).find("#InputVars").html().replace(/.+nextListSeqNumber=/,""),k=$(e).find(".dropdowntable");null!=k.get(0)?b.numRowsReturned=k.attr("numRows"):b.numRowsReturned=0;Number(h)>Number(b.curListSeqNumber)&&(b.curListSeqNumber=h,"none"!=getDisplay(b.box)&&(0==b.numRowsReturned?(""!=a&&"0"==b.accumulate&&"0"==b.freeText&&(b.box.style.backgroundColor="#fbc9cd"),0!=b.page&&(1==b.pageDnPressed?b.page--:b.page++)):(putLS(c,d),b.list.innerHTML=e.innerHTML,
b.listTableSel=$(b.list).find(".dropdowntable"),b.numRows=b.numRowsReturned,b.box.style.backgroundColor="",b.showList(),d=$(b.list).find(".listfooter").get(0),e=d.getElementsByTagName("SPAN"),d.style.cursor="default",e[0].onclick=function(a){b.pageUp();cancelBubble(a)},e[1].onclick=function(a){b.pageDn();cancelBubble(a)})))})};
myDropDown.prototype.cancelHideMyDropDown=function(){this.highlighted=-1;displayNone(this.list);""!=this.box.value&&this.box.value!=this.label||this.content.setAttribute("text","")};myDropDown.prototype.changeHighlight=function(){$(this.list).find("tr.rowhl").removeClass("rowhl");0<=this.highlighted&&$(this.list).find("[rowNum="+this.highlighted+"]").addClass("rowhl")};
myDropDown.prototype.boxonkeyup=function(a){switch(getEvent(a).keyCode){case 9:case 13:case 27:case 33:break;default:this.curText!=this.box.value&&(this.content.value="",this.runningList=this.page=0,this.populateList(),this.curText=this.box.value)}};
myDropDown.prototype.boxonkeydown=function(a){switch(getEvent(a).keyCode){case 27:this.cancelHideMyDropDown();break;case 33:this.pageUp();break;case 34:this.pageDn();break;case 38:0<this.highlighted?this.highlighted--:this.highlighted=this.numRows-1;this.changeHighlight();break;case 40:this.highlighted<this.numRows-1?this.highlighted++:this.highlighted=0,this.changeHighlight()}};
function initStnTrn(){$("#HyperSrhBox div.close").hover(function(){$(this).css("color","red").css("font-weight","bold")},function(){$(this).css("color","").css("font-weight","")});$("#HyperSrhBox .stntrnadv .stntrnbtn").click(function(a){expandAdv(!0)});$("#HyperSrhBox .stntrndiv").mouseenter(function(a){a=$(this).children(":first").next();if(!a.is(":visible")){var b=$(this).outerWidth();a.width()<b&&a.width(b).find("table").width(b);a.css("left",$(this).offset().left+"px");a.css("top",$(this).offset().top+
$(this).outerHeight()+"px");a.slideDown("fast")}});$("#HyperSrhBox .stntrndiv").mouseleave(function(a){var b=$(this);b.attr("left",1);setTimeout(function(){1==b.attr("left")&&(b.children(":first").next().slideUp("fast"),cancelBubble(a))},50)});$("#HyperSrhBox .stntrnbtn").hover(function(){$(this).removeClass("stntrnbtn1").addClass("stntrnbtn2")},function(){$(this).removeClass("stntrnbtn2").addClass("stntrnbtn1")});$("#HyperSrhBox .stntrnbtn").mousedown(function(){$(this).removeClass("stntrnbtn2").addClass("stntrnbtn3")}).mouseup(function(){$(this).removeClass("stntrnbtn3").addClass("stntrnbtn2")});
$("#HyperSrhBox [name=SrhTrnListDiv]").click(function(a){window.open(getSrhParams(4),"_self");cancelBubble(a)});$("#HyperSrhBox [name=SrhImgTrnListDiv]").click(function(a){window.open(getSrhParams(6),"_self");cancelBubble(a)});$("#HyperSrhBox [name=DepDiv],[name=ArrDiv]").click(function(a){"DepDiv"==$(this).attr("name")?window.open(getSrhParams(2),"_self"):"ArrDiv"==$(this).attr("name")&&window.open(getSrhParams(3),"_self");cancelBubble(a)});$("#HyperSrhBox [name=SrhDiv],[name=ACDiv]").click(function(a){"SrhDiv"==
$(this).attr("name")?window.open(getSrhParams(0),"_self"):window.open(getSrhParams(1),"_self");cancelBubble(a)});$("#HyperSrhBox [name=RtDiv]").click(function(a){window.open(getSrhParams(5),"_self");cancelBubble(a)});$("#HyperSrhBox .stntrndiv").click(function(){var a=$(this).parents(".mydropdownbox").find(".stntrncontent").val();"Trn"==$(this).parents(".mydropdownbox").attr("baseName")?(resetMyDropDowns(),window.open("/train/"+a,"_self")):"CreatedBy"==$(this).parents(".mydropdownbox").attr("baseName")?
(resetMyDropDowns(),window.open("/imgtrains?cu="+a.replace(/\|.*/,""),"_self")):"FromStn"==$(this).parents(".mydropdownbox").attr("baseName")?(resetMyDropDowns(),window.open("/departures/"+a,"_self")):"ThruStn"==$(this).parents(".mydropdownbox").attr("baseName")?(resetMyDropDowns(),window.open("/arrivals/"+a,"_self")):"ToStn"==$(this).parents(".mydropdownbox").attr("baseName")&&(resetMyDropDowns(),window.open("/arrivals/"+a,"_self"))});$("#HyperSrhBox .stntrndiv").keypress(function(a){if(13==getEvent(a).keyCode)return $("#"+
$(this).parents("div.mydropdownbox").attr("defaultButtonID")).click(),!1});$("#HyperSrhBox .menu td").hover(function(){$(this).parent().hasClass("menudisabled")||$(this).addClass("colhl")},function(){$(this).parent().hasClass("menudisabled")||$(this).removeClass("colhl")});$("#HyperSrhBox .mydropdownbox .menu tr").click(function(a){$(this);var b="";/\?/.exec($(this).attr("pref"))&&(b=$(this).attr("pref").replace(/^.*\?/,""));var c=$(this).attr("pref").replace(/\?.*/,""),d=$(this).parents(".mydropdownbox").find(".stntrncontent").val();
resetMyDropDowns();window.open(c+d+"?"+b,"_self");cancelBubble(a)});$("#HyperSrhBox table.srhmenu tr").click(function(a){var b=$(this);$(this).hasClass("menudisabled")||$.ajax({url:$(this).attr("pref")+"&kkk="+1*new Date,dataType:"html",success:function(a){var d=$("#HyperSrhBox").parent();b.parents("div.menu").hide();orgHyperSrhBox=d.html();d.html(a);d.find(".mydropdownbox").each(function(){new myDropDown(this)});d.find(".mydatebox").each(function(){new myDate(this)});initStnTrn();initTileSel($("#HyperSrhBox"));
expandAdv(!0)}});cancelBubble(a)})}
function getSrhParams(a){var b=$("#HyperSrhBox"),c=b.find("[name=FromStnContent]").val();c||(c=0);var d=b.find("[name=ThruStnContent]").val();d||(d=0);var e=b.find("[name=ThruStn1Content]").val();e||(e=0);var f=b.find("[name=ThruStn2Content]").val();f||(f=0);var g=b.find("[name=ThruStn3Content]").val();g||(g=0);var h=b.find("[name=ToStnContent]").val();h||(h=0);var k=b.find("[name=TrnContent]").val();k||(k=0);var l=b.find("[name=AccDate]").val(),n=b.find("[name=idf]").val(),r=b.find("[name=idt]").val(),
p=b.find("[name=CreatedByContent]").val();p&&(p=p.replace(/\|.*/,""));resetMyDropDowns();var m=0,q=0,s=b.find("[name=ExactDep]").first().next(),t=b.find("[name=ExactArr]").first().next();s.attr("checked")&&(m=1);t.attr("checked")&&(q=1);k="date="+l+"&dd="+b.find("[name=DepDays]").val()+"&ad="+b.find("[name=ArrDays]").val()+"&co="+b.find("[name=TrainClassBox]").val()+"&tt="+b.find("[name=TrainType]").val()+"&ed="+m+"&dp="+b.find("[name=DepPF]").val()+"&ea="+q+"&ap="+b.find("[name=ArrPF]").val()+"&loco="+
b.find("[name=LocoType]").val()+"&drev="+b.find("[name=DepReversal]").val()+"&arev="+b.find("[name=ArrReversal]").val()+"&trev="+b.find("[name=TrnReversal]").val()+"&rake="+b.find("[name=Rake]").val()+"&rsa="+b.find("[name=RSA]").val()+"&idf="+n+"&idt="+r+"&dhf="+b.find("[name=dhf]").val()+"&dmf="+b.find("[name=dmf]").val()+"&dht="+b.find("[name=dht]").val()+"&dmt="+b.find("[name=dmt]").val()+"&ahf="+b.find("[name=ahf]").val()+"&amf="+b.find("[name=amf]").val()+"&aht="+b.find("[name=aht]").val()+
"&amt="+b.find("[name=amt]").val()+"&nhf="+b.find("[name=nhf]").val()+"&nht="+b.find("[name=nht]").val()+"&ttf="+b.find("[name=ttf]").val()+"&ttt="+b.find("[name=ttt]").val()+"&dstf="+b.find("[name=dstf]").val()+"&dstt="+b.find("[name=dstt]").val()+"&spdf="+b.find("[name=spdf]").val()+"&spdt="+b.find("[name=spdt]").val()+"&zone="+b.find("[name=TrainZone]").val()+"&pantry="+b.find("[name=Pantry]").val()+"&stptype="+b.find("[name=stptype]").val()+"&raketype="+b.find("[name=raketype]").val()+"&cu="+
p+"&trn="+k+"&q="+myTrim(b.find("[name=q]").val()).replace(b.find("[name=q]").attr("label"),"");if(0==a)return"/search/"+c+"/"+d+"/"+h+"?"+k;if(1==a)return"/avblcal/"+c+"/"+d+"/"+h+"?"+k;if(2==a)return 6==1*b.find("[name=stptype]").val()?"/arrivals/"+c+"?"+k:"/departures/"+c+"?"+k;if(3==a)return 5==1*b.find("[name=stptype]").val()?"/departures/"+c+"?"+k:"/arrivals/"+c+"?"+k;if(4==a)return"/trains?"+k;if(6==a)return"/imgtrains?"+k;if(5==a)return a="via=",0!=e&&(a+=e+","),0!=f&&(a+=f+","),0!=g&&(a+=
g),"/route/"+c+"/"+h+"?"+a}
function myTextBox(a){var b=this;b.boxSel=a;b.box=b.boxSel.get(0);b.label=b.boxSel.attr("label");b.box.onclick=function(){};b.box.onfocus=function(a){b.boxSel.val()==b.label?b.boxSel.val(""):b.box.select();b.boxSel.removeClass("blurtextbox");b.boxSel.addClass("focustextbox")};b.box.onblur=function(a){if(""==b.boxSel.val()||0==b.boxSel.val())b.boxSel.val(b.label),b.boxSel.removeClass("focustextbox"),b.boxSel.addClass("blurtextbox")};b.box.onkeyup=function(a){switch(getEvent(a).keyCode){case 13:b.defaultButton&&b.defaultButton.click()}};
""!=b.boxSel.attr("defaultButtonID")&&(b.defaultButton=$("#"+b.boxSel.attr("defaultButtonID")).get(0));b.box.onfocus()}
$(document).ready(function(){var a=$("#Forgot2Pwd");$("#Forgot2Form").length&&($("#Forgot2Form").get(0).onsubmit=function(){if(6>a.val().length)return a.focus(),showMessageBoxRed(5,"Please enter at least 6 characters for password."),!1;hideMessageBoxRed(5);showMessageBoxLoadingNoWaitScreen(5);thisFunction=function(){var a=document.getElementById("formTargetFrame").contentWindow.document;document.createElement("div");a=eval("("+a.body.innerHTML+")");0==a.Error?(showMessageBoxGreen(5,"Login Successful. Please wait..."),
window.open("/?kkk="+1*new Date,"_self")):showMessageBoxRed(5,a.Message);hideMessageBoxLoading(5)};return!0},$("#Forgot2Pwd").focus())});function validateLogin(){var a=$("#LoginEMail"),b=a.val(),c=$("#LoginPwd"),d=c.val();return/@/.exec(b)&&/\./.exec(b)?6>d.length?(c.focus(),showMessageBoxRed(4,"Invalid Password."),!1):!0:(a.focus(),showMessageBoxRed(4,"Please enter a valid EMail."),!1)}
function validateSignup(){var a=$("#SignupEMail"),b=a.val(),c=$("#SignupPwd"),d=c.val(),e=$("#HomeStationBox"),f=$("#HomeStationContent").val(),g=$("#NearestStationBox"),h=$("#NearestStationContent").val();if(/@/.exec(b)&&/\./.exec(b)){if(6>d.length)return c.focus(),showMessageBoxRed(4,"Please enter at least 6 characters for your password."),!1;if(""==f)return e.focus(),showMessageBoxRed(4,"Please select your Home Railway Station."),!1;if(""==h)return g.focus(),showMessageBoxRed(4,"Please select your Nearest Railway Station."),
!1}else return a.focus(),showMessageBoxRed(4,"Please enter a valid EMail."),!1;return confirm("An Activation EMail will be sent to "+b+". Please CONFIRM that the EMail is correct. Click OK to Continue.")?!0:(a.focus(),showMessageBoxRed(4,"Please correct the EMail."),!1)}
function validateForgot(){var a=$("#ForgotEMail"),b=a.val(),c=$("#ForgotPwd"),d=c.val();return/@/.exec(b)&&/\./.exec(b)?6>d.length?(c.focus(),showMessageBoxRed(4,"Please enter at least 6 characters for your NEW password."),!1):!0:(a.focus(),showMessageBoxRed(4,"Please enter a valid EMail."),!1)}
function myInitLoginScreen(){$("#LoginEMail").length?$("#LoginEMail").focus():$("#ForgotEMail").length?$("#ForgotEMail").focus():$("#SignupEMail").focus();$("#LoginForm").submit(function(){if(!validateLogin())return!1;hideMessageBoxRed(4);showMessageBoxLoadingNoWaitScreen(4);thisFunction=function(){var a=document.getElementById("formTargetFrame").contentWindow.document;document.createElement("div");a=eval("("+a.body.innerHTML+")");0==a.Error?(showMessageBoxGreen(4,"Login Successful. Please wait..."),
window.open("/?kkk="+1*new Date,"_self")):showMessageBoxRed(4,a.Message);hideMessageBoxLoading(4)};return!0});$("#SignupForm").submit(function(){if(!validateSignup())return!1;hideMessageBoxRed(4);showMessageBoxLoadingNoWaitScreen(4);thisFunction=function(){var a=document.getElementById("formTargetFrame").contentWindow.document;document.createElement("div");a=eval("("+a.body.innerHTML+")");0==a.Error?(showMessageBoxGreen(4,"Signup Successful. Please wait..."),window.open("/?kkk="+1*new Date,"_self")):
showMessageBoxRed(4,a.Message);hideMessageBoxLoading(4)};return!0});$("#ForgotForm,#ReActivationForm").submit(function(){if(!validateForgot())return!1;hideMessageBoxRed(4);showMessageBoxLoadingNoWaitScreen(44);thisFunction=function(){var a=document.getElementById("formTargetFrame").contentWindow.document;document.createElement("div");a=eval("("+a.body.innerHTML+")");0==a.Error?(alert("An Email has been sent to the given address. Thanks."),showMessageBoxGreen(4,"Please check your EMail box.")):showMessageBoxRed(4,
a.Message);hideMessageBoxLoading(4)};return!0})}function fbLogin(){var a=/^https?:\/\/m\..*/.exec(window.location.href)?"https://www.facebook.com/dialog/oauth?client_id=253371170693&redirect_uri=http://m.indiarailinfo.com/fblogin&response_type=token":"https://www.facebook.com/dialog/oauth?client_id=253371170693&redirect_uri=http://indiarailinfo.com/fblogin&response_type=token";window.open(a,"_self")}var watchProcess;$(document).ready(function(){$("#RegisterTripBtnn").length&&initTripPage()});
function showTripForm(a,b,c,d,e,f,g,h){var k=a.next();k&&k.find(".subpost").length?k.is(":visible")?k.hide():(k.show(),k.find("textarea").focus()):(0==g?a.hide().prev().show():a.find("td").addClass("wait"),$.get("/t?b="+b+"&r="+c+"&s="+e+"&i="+g+"&e="+h+"&kkk="+1*new Date,function(b){0==g?a.show().prev().hide():a.find("td").removeClass("wait");k=a.next();if(!k||!k.find(".subpost").length){a.after(b);var c=a.next();1==f&&(c.find(".postlocinfo").show().html("updating location. please wait..."),watchLocation(function(a){$.get("/tl?t="+
d+"&lat="+a.coords.latitude+"&lng="+a.coords.longitude+"&kkk="+1*new Date,function(b){c.find(".postlocinfo").html(myTrim(b));c.find("[name=TripLat]").val(a.coords.latitude);c.find("[name=TripLng]").val(a.coords.longitude)})}));c.find(".mydropdownbox").each(function(){new myDropDown(this)});c.find("form").submit(function(){unloadWarning=0;thisFunction=function(){var a=document.getElementById("formTargetFrame").contentWindow.document,b=$("#ST-"+d);b.html(a.body.innerHTML);initTooltip(b.find("input,td[title],span[title],a[title]"));
initSchInlineCapsules(b)};c.find("input.postbtn").hide().after("<img class=imgSpinner src=https://st.indiarailinfo.com/images/1.png>");return!0});initTooltip(c.find("div,input"));mkEl(c.find("textarea"),c.find("div.shadow"));c.find("textarea").focus()}}))}
function watchLocation(a){var b=navigator.geolocation;if(b)try{null!=watchProcess&&b.clearWatch(watchProcess),watchProcess=b.getCurrentPosition(a,function(){alert("Geolocation not working currently. Please try manual update.")},{enableHighAccuracy:!0,maximumAge:6E4})}catch(c){alert("Error occurred while retrieving geolocation. Please try manual update update.")}else alert("This browser does not support geolocation. Please try manual update update.")}
function initTripPage(){var a=document.getElementById("PNRNumber");a.focus();document.getElementById("RegisterTripBtnn").onclick=function(){var b=validatePNR(a.value);0!=b&&($("#RegisterTripBtnn").after('<span style="color:red;">&nbsp;&nbsp;wait</span>'),$.get("/pnr/update?tb=0&p="+b,function(a){$("#RegisterTripBtnn").next().remove();tb_show(null,"/newtripform?p="+b+"&height=500&width=630&modal=false&afterLoad=initNewTripForm",null)}))};$("#RegisterTripBtn").click(function(){if($("#AppVersion").length){var b=
validatePNR(a.value);0!=b&&tb_show(null,"/newtripform?p="+b+"&height=500&width=630&modal=false&afterLoad=initNewTripForm",null)}});$("#RegisterTripBtn1").click(function(){var a=document.getElementById("PNRNumber"),a=validatePNR(a.value);tb_show(null,"/newtripform?p="+a+"&height=500&width=630&modal=false&afterLoad=initNewTripForm",null)})}
function initNewTripForm(a){var b=a.find("[name=NewTripForm]").get(0),c=a.find("[name=TrainBlog]").get(0);b.onreset=function(){tb_remove();return!0};b.onsubmit=function(){var a=c.value.replace(/^\s+|\s+$/,"").substring(0,1E4);c.value=a;if(isSpam(a))return c.focus(),thisFunction=null,!1;if(""!=a)return hideMessageBoxRed(8888),showMessageBoxLoadingNoWaitScreen("8888"),thisFunction=function(){var a=document.getElementById("formTargetFrame").contentWindow.document,b=document.createElement("div");b.innerHTML=
a.body.innerHTML;tb_init($(b).find("a.thickbox"));$("#TripDivNewBlock").append(b);hideMessageBoxLoading(8888);tb_remove()},!0;c.focus();showMessageBoxRed(8888,"Please fill in some description of your trip.");thisFunction=null;return!1}}
function getTripNextPageBare(a,b){a.find("span").parent().hide();a.find("img").parent().show();$.get(b+"&kkk="+1*new Date,function(b){a.html("<hr class=pagebreak>"+b);"undefined"!=typeof tb_init&&tb_init(a.find("a.thickbox"));initTooltip(a.find("td[title],span[title],a[title]"))})}function tripTabClick(a){a.parent().find("b").hide();a.parent().find("button").show();a.hide().next().show()}function showTripBlog(a,b){$("#TR-"+b+"-0").show();$("#SU-"+b+"-0").hide();tripTabClick(a)}
function showTripTable(a,b){$("#TR-"+b+"-0").hide();$("#SU-"+b+"-0").html('<img src="https://st.indiarailinfo.com/images/ajax-loader.gif" />').show();$.get("/diary/trip/"+b+"?i=1&tt=1",function(c){$("#SU-"+b+"-0").hide().html(c).slideDown();initSchInlineCapsules($("#SU-"+b+"-0"));tripTabClick(a)})}
function removeTripLog(a,b){confirm("Are you sure you wish to delete this Log Entry?")&&$.get("/trip/log/x?t="+a+"&tl="+b+"&kkk="+1*new Date,function(b){var d=$("#ST-"+a);d.replaceWith(b);initTooltip(d.find("input,td[title],span[title],a[title]"));initSchInlineCapsules(d)})}var recorder;
function blogSearchOnClick(){var a=myTrim($("#qBox").val()).replace($("#qBox").attr("label"),""),b=myTrim($("#BlogEntryNumber").val()).replace($("#BlogEntryNumber").attr("label"),""),c=$("#HashTagContent").val().replace(/#/g,""),d=$("#FromDateContent-").val(),e=$("#ToDateContent-").val(),f=$("#TrainType").val(),g=$("#TrainIDContent").val(),h=$("#StationIDContent").val(),k=document.getElementById("UserSearchContent").value.replace(/\|.*/,""),l=0,n=0,r=0,p=0;$("#SrhPicVid").length?($("#SrhPicVid").attr("checked")&&
(n=1),p=0):p=1;var m=$("[name=SrhSort]").first(),q=m.next(),s=q.next();$("#SrhPublic").attr("checked")&&(l|=1);$("#SrhPvt").attr("checked")&&(l|=2);$("#SrhMonitor").attr("checked")&&(l|=4);$("#SrhRFClub").attr("checked")&&(l|=8);$("#SrhAdmin").attr("checked")&&(l|=16);m.attr("checked")?r=0:q.attr("checked")?r=1:s.attr("checked")&&(r=2);/\d+/.exec(d)||(d=0);/\d+/.exec(e)||(e=0);/\d+/.exec(g)||(g=0);/\d+/.exec(h)||(h=0);/\d+/.exec(k)||(k=0);/^[a-zA-Z0-9]+$/.exec(c)||(c="");/\d+/.exec(b)?(resetMyDropDowns(),
window.open("/blog/post/"+b+"?kkk="+1*new Date,"_self")):1==p?(resetMyDropDowns(),window.open("/gallery?u="+k+"&df="+d+"&dt="+e+"&tt="+f+"&t="+g+"&s="+h+"&h="+c+"&q="+a.replace(/\?|#/g," ")+"&ppa="+l+"&sort="+r+"&kkk="+1*new Date,"_self")):(resetMyDropDowns(),window.open("/blog?u="+k+"&df="+d+"&dt="+e+"&tt="+f+"&t="+g+"&s="+h+"&h="+c+"&q="+a.replace(/\?|#/g," ")+"&ppa="+l+"&picvid="+n+"&sort="+r+"&kkk="+1*new Date,"_self"))}
$(document).ready(function(){checkNewBlogPosts();setInterval(checkNewBlogPosts,12E4);initTrainBlog()});
function checkNewBlogPosts(){$.getJSON("/trainblog/CheckNewBlogPosts?w="+$(window).width()+"&kkk="+1*new Date,function(a){0<1*a.a&&alertSlideDown($("#blogalert a").html(a.a+"&nbsp;Blog"));0<1*a.i&&alertSlideDown($("#picalert a").html(a.i+'&nbsp;<span style="font-size:10px;">Pic</span>'));0<1*a.g&&alertSlideDown($("#imgalert a").html(a.g+'&nbsp;<span style="font-size:10px;">&hearts;&hearts;</span>'));0<1*a.sb&&alertSlideDown($("#socalert a").html(a.sb+'&nbsp;<span style="font-size:10px;">Social</span>'));
0<1*a.sv&&alertSlideDown($("#svalert a").html(a.sv+'&nbsp;<span style="font-size:10px;">Poll</span>'));0<1*a.rb&&alertSlideDown($("#racealert a").html(a.rb+'&nbsp;<span style="font-size:10px;">Race</span>'));0<1*a.p&&alertSlideDown($("#tipalert a").html(a.p+"&nbsp;Travel&nbsp;Tip"));0<1*a.b&&alertSlideDown($("#pnralert a").html(a.b+"&nbsp;PNR"));0<1*a.d&&alertSlideDown($("#pvtalert a").html(a.d+"&nbsp;Pvt"));0<1*a.tlconf&&alertSlideDown($("#tlconfalert a").html(a.tlconf+"&nbsp;Conf&nbsp;TL"));0<1*
a.m&&alertSlideDown($("#adminalert a").html(a.m+"&nbsp;Admin"));0<1*a.v&&alertSlideDown($("#convalert a").html(a.v+"&nbsp;Conv"));0<1*a.pred&&alertSlideDown($("#predalert a").html(a.pred+"&nbsp;Pred"));0<1*a.mysv&&alertSlideDown($("#mysvalert a").html(a.mysv+"&nbsp;Vote"));0<1*a.r&&alertSlideDown($("#attnalert a").html(a.r+"&nbsp;Attn"));0<1*a.fm&&alertSlideDown($("#fmalert a").html(a.fm+"&nbsp;FM&nbsp;Alert"));0<1*a.grt&&alertSlideDown($("#grtalert a").html(a.grt+"&nbsp;Greeting"));0<1*a.mon&&alertSlideDown($("#monitoralert a").html(a.mon+
"&nbsp;Monitor"));0<1*a.rf&&alertSlideDown($("#rfclubalert a").html(a.rf+"&nbsp;RF&nbsp;Club"));0<1*a.f&&alertSlideDown($("#followedalert a").html(a.f+"&nbsp;Followed"));0<1*a.n&&alertSlideDown($("#newsalert a").html(a.n+"&nbsp;News"));0<1*a.t&&alertSlideDown($("#tripalert a").html(a.t+"&nbsp;Trip"));0<1*a.h&&alertSlideDown($("#timelinealert a").html(a.h+"&nbsp;Timeline"));0<1*a.op&&alertSlideDown($("#opinionalert a").html(a.op+"&nbsp;Rating"))})}
function alertSlideDown(a){$(".alert").show();a=a.parent();a.parent().show();a.hide().slideDown()}function initTrainBlog(){$(".blogheaderclosed,.blogreplyheaderclosed").hover(function(){$(this).addClass("blogheaderclosed-hl")},function(){$(this).removeClass("blogheaderclosed-hl")})}function incrProgress(a,b){var c=1*a.attr("value")+1,d=Math.ceil(100*c/b)+"%";a.attr("value",c);a.css("width",d);a.html(d)}
function uploadSeg(a,b,c,d,e,f,g,h,k,l,n,r,p,m){var q=a[b],s=n[r],t=s*p,u=new FormData;u.append("submittype",2);u.append("RawFileDir",k);u.append("RawFileName",c+"."+s+"."+e+"."+d);u.append("Srv",m);s=t+p;s>q.size&&(s=q.size);q.slice?u.append("RawFile",q.slice(t,s)):q.webkitSlice?u.append("RawFile",q.webkitSlice(t,s)):q.mozSlice&&u.append("RawFile",q.mozSlice(t,s));$.ajax({url:"/bp?kkk="+1*new Date,data:u,cache:!1,contentType:!1,processData:!1,type:"POST",timeout:3E4,success:function(q){q=myTrim(q);
if("error2"==q)h.html("this file type cannot be uploaded.");else if("error3"==q)h.html("processing error. press Retry."),f.find("button.retrybtn").show();else if("error"==q)"1"==f.find("button.pausebtn").attr("pause")?f.find("button.retrybtn").show():(h.html("network error. retrying..."),setTimeout(function(){uploadSeg(a,b,c,d,e,f,g,h,k,l,n,r,p,m);h.html("uploading")},5E3));else if("success"==q)incrProgress(g,e),"0"==f.find("button.pausebtn").attr("pause")&&uploadSeg(a,b,c,d,e,f,g,h,k,l,n,r+1,p,m);
else if(""!=q){var s=f.find("button.pausebtn").attr("pause");f.html(q);initTooltip(f.parents("form").find("a"));b<a.length-1&&"0"==s&&uploadFile(a,a[b+1].name,b+1,k,l,m)}},error:function(q){"1"==f.find("button.pausebtn").attr("pause")?f.find("button.retrybtn").show():(h.html("network error. retrying..."),setTimeout(function(){h.html("uploading");uploadSeg(a,b,c,d,e,f,g,h,k,l,n,r,p,m)},5E3))}})}
function uploadFile(a,b,c,d,e,f){var g=a[c],h=b.replace(/\..*/,"")+g.size,k=b.replace(/.*\./,""),l=Math.ceil(g.size/25600);e.find('div[fileName="'+h+'"]').remove();e.append('<div fileName="'+h+'" style="float:left;margin:5px;border:1px solid black;">'+h+"."+k+'<br /><div class="progress1"><div class="progress2" value="" style="width:0px;"></div></div><div style="clear:both;"></div><div class="progress3">uploading</div><button class=pausebtn pause="0">Stop</button><button class=retrybtn >Retry</button></div>');
var n=e.find('div[fileName="'+h+'"]'),r=n.find("div.progress2"),p=n.find("div.progress3");bindRetryBtn(a,b,c,d,n,f);$.get("/seg?r="+d+"&f="+(h+"."+k)+"&srv="+f+"&kkk="+1*new Date,function(b){for(var q=[],s=0;s<g.size;s+=25600){var t=s/25600;RegExp(","+t+",","g").exec(b)?incrProgress(r,l):q.push(t)}uploadSeg(a,c,h,k,l,n,r,p,d,e,q,0,25600,f)}).fail(function(){p.html("network error. press Retry.");n.find("button.retrybtn").show()})}
function bindRetryBtn(a,b,c,d,e,f){var g=e.parent();e.find("button.retrybtn").click(function(){e.find("button.pausebtn").attr("pause","0").show();e.find("button.retrybtn").hide();uploadFile(a,b,c,d,g,f);return!1});e.find("button.pausebtn").click(function(){var a=e.find("div.progress3");e.find("button.pausebtn").attr("pause","1").hide();e.find("button.retrybtn").show();a.html("upload paused.");return!1})}
function handleFileSelect(a){var b=a.parents("form"),c=b.find("[name=RawFileDir]").val(),d=b.find("[name=Srv]").val();b.find("[name=RawFileProg]");var e=b.find("[name=RawFileCont]");window.File&&window.FileReader&&window.FileList&&window.Blob&&!/Windows Phone 8\.0|IEMobile\/10\.0|S7562|Opera Mini|Micromax|UCBrowser/i.test(navigator.userAgent)?(b=a.get(0).files,uploadFile(b,b[0].name,0,c,e,d),a.before('<input type="file" name="ImageFile" multiple="multiple" size=20 onChange="handleFileSelect($(this));" >'),
a.remove()):(b.find("[name=submittype]").val(3),b.submit())}
function initBlogPostForm(a,b,c,d,e,f,g,h,k,l,n,r){var p=a.parents("table.hangingtab"),m;p.length?0==n?m=p.parent().find(".blogpost"):1==n?m=p.parent().find(".trnpost"):2==n?m=p.parent().find(".stnpost"):3==n?m=p.parent().find(".trnpicpost"):4==n?m=p.parent().find(".stnpicpost"):5==n&&(m=p.parent().find(".locopicpost")):m=a.next();m&&m.find(".subpost").length?m.is(":visible")?m.slideUp():(m.slideDown(),m.find("textarea").focus()):(a.hide().prev().show(),$.get("/bp?n="+b+"&h="+c+"&b="+d+"&r="+e+"&t="+
f+"&c="+g+"&s="+h+"&l="+k+"&e="+l+"&ttp="+n+"&grp="+r+"&kkk="+1*new Date,function(f){a.show().prev().hide();p.length?0==n?m=p.parent().find(".blogpost"):1==n?m=p.parent().find(".trnpost"):2==n?m=p.parent().find(".stnpost"):3==n&&(m=p.parent().find(".locopost")):m=a.next();if(!m||!m.find(".subpost").length)if(/^1:/.exec(f))f='<div style="text-align:left;display:none;">'+f.replace(/^1:/,"")+"</div>",p.length?(p.after(f),m=p.next()):(a.after(f),m=a.next()),m.slideDown();else{f='<div style="text-align:left;display:none;">'+
f.replace(/^0:/,"")+"</div>";p.length?(p.after(f),m=p.next()):(a.after(f),m=a.next());m.slideDown();var g="";0!=b?g=b+"-0":0!=c?g=c+"-0":0!=d&&(g=d+"-"+e);m.find(".mydropdownbox").each(function(){new myDropDown(this)});initTooltip(m.find("a"));m.find("form").submit(function(){unloadWarning=0;var a=1*m.find("[name=submittype]").val(),b=m.find("input[name=ImageFile]:first"),c=0;thisFunction=function(){c=1;var d=document.getElementById("formTargetFrame").contentWindow.document,e=document.createElement("div");
e.innerHTML=myTrim(d.body.innerHTML);""!=e.innerHTML.trim()?3==a?(m.find("[name=RawFileCont]").append('<div fileName="'+name+'" style="float:left;margin:5px;border:1px solid black;">'+e.innerHTML+"</div>"),b.before('<input type="file" name="ImageFile" multiple="multiple" size=20 onChange="handleFileSelect($(this));" >'),b.next().remove(),b.remove()):/^0:/.exec(e.innerHTML)?(e.innerHTML=e.innerHTML.replace(/^\d:/,""),initTooltip($(e).find("input,td[title],span[title],a[title]")),initTabMenus($(e)),
""!=g?$("#PU-"+g).after(e):$("#TrainBlogDivNewBlock").append(e),m.remove()):(e.innerHTML=e.innerHTML.replace(/^\d:/,""),m.find(".messagebox").html(e.innerHTML).show(),m.find("input.postbtn").show().next().hide()):(m.find(".messagebox").html("Error Occurred. Pl. try again.").show(),m.find("input.postbtn").show().next().hide())};if(3==a)b.hide().after('<img src="https://st.indiarailinfo.com/images/ajax-loader.gif" />');else{if(-1==m.find("[name=GroupID]").val())return m.find(".messagebox").html("Pl. select one or more Pvt Recipients.").show(),
!1;if(-2==m.find("[name=GroupID]").val())return m.find(".messagebox").html("Pl. select a Monitor Group.").show(),!1;if(-3==m.find("[name=GroupID]").val())return m.find(".messagebox").html("Pl. select a RailFan Club.").show(),!1;m.find("input.postbtn").hide().next().show();setTimeout(function(){0==c&&(m.find(".messagebox").html("Error Occurred. Pl. try again.").show(),m.find("input.postbtn").show().next().hide())},2E4);return!0}});initTooltip(m.find("div,input"));mkEl(m.find("textarea"),m.find("div.shadow"));
m.find("textarea").focus()}}))}
showCtrl=function(a,b){a.hide();var c=a.parents("div.post");if(0==b)c.find("[name=ImageFile]").slideDown();else if(1==b)c.find("[name=VideoLink]").slideDown().focus();else if(2==b)c.find("[name=TrainIDBlogBoxContainer]").slideDown().find("input:visible").focus(),c.find("[name=StationIDBlogBoxContainer]").slideDown(),c.find("[name=LocoIDBlogBoxContainer]").slideDown();else if(4==b){var d;navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;
navigator.getUserMedia&&window.File&&window.FileReader&&window.FileList&&window.Blob&&!/Windows Phone 8\.0|IEMobile\/10\.0|S7562|Opera Mini|Micromax|UCBrowser/i.test(navigator.userAgent)&&(d=!0);if(!d){alert("Sound Recording is not supported by your browser/device.");return}var e=c.find("[name=SndMsg]"),f=c.find("[name=SndRecCtrl]"),g=c.find("[name=UploadBtn]"),h=c.find("[name=CntDown]"),k=c.find("[name=CntVal]"),l=c.find("[name=Cmp]"),n=c.find("[name=SndPlay]");d=f.parents("form");var r=d.find("[name=RawFileDir]").val(),
p=d.find("[name=Srv]").val(),m=d.find("[name=RawFileCont]");e.slideDown();f.slideDown();f.click(function(){navigator.getUserMedia({video:!1,audio:!0},function(a){a=(new AudioContext).createMediaStreamSource(a);Recorder||initRecorder();recorder=new Recorder(a);recorder.record();n.hide();f.hide();g.hide();k.html(20);h.show();var b=setInterval(function(){var a=1*k.html();0<a?k.html(a-1):(clearInterval(b),f.hide(),h.hide(),recorder.stop(),recorder.exportWAV(function(a){var b=[a];n.get(0).src=window.URL.createObjectURL(b[0]);
n.slideDown();f.html("Re-Record").show();g.show();g.unbind("click");g.click(function(){e.hide();f.hide();g.hide();l.show();recorder.exportWAV2(a,function(a){l.hide();a=[a];n.hide();uploadFile(a,"abcd"+1*new Date+".mp3",0,r,m,p)});return!1})}))},1E3)},function(){alert("Sorry. Audio Recording is not working (or you have blocked permission. In this case, go to your browser Settings and re-enable).")});return!1})}c.find("div.postinputs").slideDown()};
mkEl=function(a,b){if(b.length){a.get(0).onpaste=function(){setTimeout(c,0)};a.keydown(function(a){unloadWarning=1;setTimeout(c,0)});var c=function(c){c=a.parents("div.post").width();a.css("width",c-12+"px");b.css("width",c-12+"px");b.html(a.val().replace(/<|>/g," ").replace(/&/g,"&amp;").replace(/\r?\n/g,"<br />&nbsp;").replace(/(\S{50})/g,"$1 ").replace(/  /g," i")+" WWW");a.css("height",Math.max(b.height()+15,45)+"px")};setTimeout(c,500)}else a.css("height","100px")};
function addLocoID(a){var b=$("#LocoTypeIDBox"),c=$("#LocoTypeIDContent"),d=$("#ShedStationIDBox"),e=$("#ShedStationIDContent"),f=a.find("[name=LocoNumber]"),g=a.find("[name=LocoIDs]");a=a.find("[name=LocoNames]");d=b.val()+"/"+d.val().replace(/\/.*/,"")+"/"+f.val();f=c.val()+":"+e.val()+":"+f.val();if(""==c.val()||""==e.val())return alert("Please select a Loco Type AND Shed, and then click the Add button."),!1;a.html(a.html()+" "+d+", ");g.val(g.val()+","+f);b.focus();return!1}
function setGroupType(a){var b=a.parents("div.post");b.find("div.postpvtrec").html("");b.find("input[name=PvtUserIDs]").val("");a=a.val();0==a||2==a||3==a?(b.find("[name=PvtUserIDBlogBoxContainer]").hide(),b.find("[name=MonitorBox]").hide(),b.find("[name=RFClubBox]").hide(),0==a?b.find("[name=GroupID]").val(0):2==a?b.find("[name=GroupID]").val(1):3==a&&b.find("[name=GroupID]").val(3)):1==a?(b.find("[name=PvtUserIDBlogBoxContainer]").show(),b.find("[name=MonitorBox]").hide(),b.find("[name=RFClubBox]").hide(),
b.find("[name=GroupID]").val(-1)):4==a?(b.find("[name=PvtUserIDBlogBoxContainer]").hide(),b.find("[name=MonitorBox]").show(),b.find("[name=RFClubBox]").hide(),b.find("[name=GroupID]").val(-2)):5==a&&(b.find("[name=PvtUserIDBlogBoxContainer]").hide(),b.find("[name=MonitorBox]").hide(),b.find("[name=RFClubBox]").show(),b.find("[name=GroupID]").val(-3))}
function setGroupID(a){var b=a.parents("div.post");b.find("[name=GroupID]").val(a.val());b.find("div.postpvtrec").html("");b.find("input[name=PvtUserIDs]").val("")}
function addPvtUserQk(a){var b=a.parents("div.post"),c=b.find("div.postpvtrec"),d=b.find("input[name=PvtUserIDs]"),e=a[0].options[a[0].selectedIndex].text,f=a.val();if(0==f)alert("Please select a Member to Pvt Post.");else return $.get("/members/vublk?u="+f,function(a){a=myTrim(a);1==a?(c.html(c.html()+e+", "),d.val(d.val()+"+"+f),c.show(),b.find("[name=GroupID]").val(0)):alert("You may not send a private post to this Member.")}),a.val(0),a.focus(),!1}
function addPvtUser(a){var b=$("#"+a+"Box");a=$("#"+a+"Content");var c=b.parents("div.post"),d=c.find("div.postpvtrec"),e=c.find("input[name=PvtUserIDs]"),f=b.val(),g=a.val().replace(/\|.*/,"");if(""==g)alert("Please select a Member to Pvt Post, and then click the Add button.");else return $.get("/members/vublk?u="+g,function(a){a=myTrim(a);1==a?(d.html(d.html()+f+", "),e.val(e.val()+"+"+g),d.show(),c.find("[name=GroupID]").val(0)):alert("You may not send a private post to this Member.")}),b.val(""),
a.val(""),b.focus(),!1}function moveTipToMain(a){$.get("/trainblog/mttm?b="+a+"&kkk="+1*new Date,function(b){$("#PU-"+a+"-0").after(b)})}function selectListItem(a,b,c){var d=a.parents("div[name=JSONContent]");a.replaceWith('<img src="https://st.indiarailinfo.com/images/ajax-loader.gif" />');$.get("/trainblog/SaveItemChoice?TrainBlogID="+b+"&ItemNum="+c+"&kkk="+1*new Date,function(a){d.slideUp().html(a).slideDown()})}
function blogInv(a,b,c,d){if(confirm("This Rating will be permanently REMOVED. Click OK to Continue.")){var e=a.parents(".ratingbox,.ratingbox2");a.replaceWith('<img src="https://st.indiarailinfo.com/images/ajax-loader.gif" />');$.get("/brinv?b="+b+"&r="+c+"&u="+d+"&kkk="+1*new Date,function(a){e.slideUp().html(a).slideDown();initTooltip(e.find("td[title],span[title],a[title]"))})}}
function tlObj(a,b,c){a.parents(".ratingbox");a.replaceWith('<img src="https://st.indiarailinfo.com/images/ajax-loader.gif" />');tb_show("","/tlobj?HistoryID="+b+"&Type="+c+"&kkk="+1*new Date+"&height=150&width=350&modal=true&afterLoad=initObjFormBeforeDisplay","");thisFunction=function(){alert("Thanks. Your issue has been Reported. Action will be taken if necessary.")}}
function blogRate(a,b,c,d){var e=a.parents(".ratingbox,.ratingbox2");a.replaceWith('<img src="https://st.indiarailinfo.com/images/ajax-loader.gif" />');998==d||999==d||95==d||96==d||97==d||98==d||99==d||4==d||5==d||7==d?(tb_show("","/br?BlogID="+b+"&ReplyNum="+c+"&Type="+d+"&kkk="+1*new Date+"&height=150&width=350&modal=true&afterLoad=initObjFormBeforeDisplay",""),thisFunction=function(){95==d?alert("Thanks. FM Warning has been sent to the Owner of this Blog."):96!=d&&97!=d&&98!=d&&99!=d||alert("Thanks. Your issue has been Reported. Action will be taken if necessary.");
var a=document.getElementById("formTargetFrame").contentWindow.document,b=document.createElement("div");b.innerHTML=myTrim(a.body.innerHTML);""!=b.innerHTML&&(e.slideUp().replaceWith(b.innerHTML).slideDown(),initTooltip(e.find("td[title],span[title],a[title]")))}):$.get("/br?BlogID="+b+"&ReplyNum="+c+"&Type="+d+"&kkk="+1*new Date,function(a){e.slideUp().replaceWith(a).slideDown();initTooltip(e.find("td[title],span[title],a[title]"))})}
function getBlogTags(a,b,c){a.is(":visible")?a.slideUp():$.get("/trainblog/GetBlogTags?BlogID="+b+"&ReplyNum="+c+"&kkk="+1*new Date,function(b){a.html(b).slideDown();initTooltip(a.find("a[title]"))})}function getItemChoices(a,b,c,d){var e=a.find(".ratingusers");e.is(":visible")?e.slideUp():$.get("/trainblog/GetItemChoices?TrainBlogID="+b+"&ItemNum="+c+"&upd="+d+"&kkk="+1*new Date,function(a){e.html(a).slideDown();initTooltip(e.find("a[title]"))})}
function getBlogRatings(a,b,c,d,e){a.is(":visible")?a.slideUp():$.get("/trainblog/GetBlogRatings?BlogID="+b+"&ReplyNum="+c+"&Type="+d+"&upd="+e+"&kkk="+1*new Date,function(b){a.html(b).slideDown();initTooltip(a.find("td[title]"))})}
function blogOpenAll(a,b,c,d){var e;e=0!=b?$("#PUD-"+a+"-"+b):$("#PUD-"+a+"-"+d);e.find("img").parent().show();$.get("/blog/postincr?b="+a+"&d="+b+"&n="+c+"&r="+d+"&kkk="+1*new Date,function(a){e.html(a);e.removeClass("blogreplyunit").css("border","1px solid Red").css("margin-top","5px");"undefined"!=typeof tb_init&&tb_init(e.find("a.thickbox"));initTooltip(e.find("td[title],span[title],a[title]"));initTabMenus(e)})}
function blogOpenClose(a,b,c){$.get("/trainblog/oc?b="+a+"&t="+b+"&c="+c+"&kkk="+1*new Date,function(c){if(0!=b){var e=$("#ST-"+b);e.slideUp().html($(c).html()).slideDown()}else e=$("#P-"+a),e.slideUp().html(c).slideDown(),initTooltip(e.find("td[title],span[title],a[title]")),initTabMenus(e),"undefined"!=typeof tb_init&&tb_init(e.find("a.thickbox"))})}
function timelineStamp(a,b){if(5==b||7==b)tb_show("","/timeline/confirm?h="+a+"&s="+b+"&kkk="+1*new Date+"&height=150&width=350&modal=true&afterLoad=initActionFormBeforeDisplay","");else{if(6==b){if(!confirm("This Timeline Entry will be Confirmed. Click OK to Continue."))return}else if(0==b&&!confirm("This Confirmed Timeline Entry will go back to Waitlist. Click OK to Continue."))return;var c=$("#PU-"+a+"-0").find(".imgbox");$("#PU-"+a+"-0").find("button").replaceWith('<img src="https://st.indiarailinfo.com/images/ajax-loader.gif" />');
$.get("/timeline/confirm?h="+a+"&s="+b+"&kkk="+1*new Date,function(b){var e=document.createElement("div");e.innerHTML=b;$("#PU-"+a+"-0").find(".ratingbox").remove();c.slideUp().html($(e).find(".imgbox").html()).slideDown()})}}
function blogStamp(a,b){if(1!=b)tb_show("","/blgstmp?BlogID="+a+"&Stamp="+b+"&kkk="+1*new Date+"&height=150&width=350&modal=true&afterLoad=initActionFormBeforeDisplay","");else{var c=$("#PU-"+a+"-0").find(".imgbox");$.get("/blgstmp?BlogID="+a+"&Stamp="+b+"&kkk="+1*new Date,function(b){var e=document.createElement("div");e.innerHTML=myTrim(b);$("#PU-"+a+"-0").find(".ratingbox").remove();c.slideUp().html($(e).find(".imgbox").html()).slideDown()})}}
function pnrStatus(a,b,c){4<=b&&!confirm("PNR's FINAL STATUS will be stamped as "+c+". Click OK to Continue.")||$.get("/trainblog/SavePNRStatus?BlogID="+a+"&PNRStatus="+b+"&kkk="+1*new Date,function(b){var c=$("#PU-"+a+"-0");c.slideUp().html(b).slideDown();"undefined"!=typeof tb_init&&tb_init(c.find("a.thickbox"));initTooltip(c.find("span[title]"))})}
function galleryClick(a,b,c,d){var e=a.next();e.is(":visible")?(a.css("border",""),e.slideUp()):(a.css("border","2px dotted red"),$.get("/blog/post/"+b+"/"+c+"?i=1&kkk="+1*new Date,function(b){var c=e.find(".galleryunitblog3");c.html(b);"undefined"!=typeof tb_init&&tb_init(c.find("a.thickbox"));initTooltip(c.find("td[title],span[title],a[title]"));initTabMenus(c);d?e.css("top",a.offset().top+a.outerHeight()-$(window).scrollTop()+"px").slideDown():e.css("top",a.offset().top+a.outerHeight()+"px").slideDown()}));
return!1}
function getNextPageBareGallery(a,b){a.find("span").parent().hide();a.find("img").parent().show();$.get(b+"&kkk="+1*new Date,function(b){var d=a.parents(".bloglistingcapsulehalf,.listingcapsulehalf").find(".gallerycont"),e=document.createElement("div");e.innerHTML=b;var f=d.length;$(e).find(".gallerycont").each(function(a){a=d.eq(a%f);a.html(a.html()+$(this).html())});a.html($(e).find(".footer").html());"undefined"!=typeof tb_init&&tb_init(d.find("a.thickbox"));initTooltip(d.find("td[title],span[title],a[title]"));initTabMenus(d)})}
function getNextPageBare(a,b){a.find("span").parent().hide();a.find("img").parent().show();$.get(b+"&kkk="+1*new Date,function(b){a.html("<hr class=pagebreak>"+b);"undefined"!=typeof tb_init&&tb_init(a.find("a.thickbox"));initTooltip(a.find("td[title],span[title],a[title]"));initTabMenus(a)})}function expandPost(a){var b=a.find(":first-child").html();a.next().html(b+a.next().html());a.hide();a.next().slideDown()}
function followBlog(a,b){$.get("/trainblog/follow?f="+b+"&t="+a+"&kkk="+1*new Date,function(b){$("#PU-"+a+"-0").find(".blogcontent,.blogreplycontent").css("backgroundColor","#CEEAD1")})}function refreshWithFilter(a){var b=window.location.href.replace(/(&+)?tp=\d+/g,"").replace(/(&+)?kkk=\d+/g,""),b=/\?/.exec(b)?b+("&tp="+a):b+("?tp="+a),b=b+("&kkk="+1*new Date);resetMyDropDowns();window.open(b,"_self")}
function initBlogCat(a){var b=a.find("[name=CategoryForm]").get(0);b.onsubmit=function(){var b=a.find("[name=TrainBlogID]").val();if(0!=a.find("[name=BlogType]").val())return thisFunction=function(){var a=document.getElementById("formTargetFrame").contentWindow.document,e=$("#PU-"+b+"-0");e.slideUp().html(a.body.innerHTML).slideDown();"undefined"!=typeof tb_init&&tb_init(e.find("a.thickbox"));initTooltip(e.find("td[title],span[title],a[title]"));initTabMenus(e)},tb_remove(),!0;a.find("[name=BlogType]").focus();
return!1};b.onreset=function(){tb_remove()};a.find("[name=BlogType]").focus()}
function initBlogTag(a){a.find(".mydropdownbox").each(function(){new myDropDown(this)});var b=a.find("[name=TagForm]").get(0);b.onsubmit=function(){var b=a.find("[name=TrainBlogID]").val(),d=a.find("[name=ReplyNum]").val(),e=a.find("[name=TrainIDBlogComp]").val(),f=a.find("[name=StationIDBlogComp]").val(),g=a.find("[name=LocoTypeID]").val(),h=a.find("[name=ShedStationIDContent]").val();if(""!=e||""!=f||0!=g&&""!=h)return thisFunction=function(){var a=document.getElementById("formTargetFrame").contentWindow.document,
e=$("#PU-"+b+"-"+d);e.slideUp().html(a.body.innerHTML).slideDown();"undefined"!=typeof tb_init&&tb_init(e.find("a.thickbox"));initTooltip(e.find("td[title],span[title],a[title]"));initTabMenus(e)},tb_remove(),!0;a.find("[name=TrainIDBlogTagBox]").focus();return!1};b.onreset=function(){tb_remove()};a.find("[name=TrainIDBlogTagBox]").focus()}
function delBlogTag(a,b,c,d){confirm("This tag will be removed. Click OK to Continue.")&&$.get("/blog/tag/x?b="+a+"&r="+b+"&t="+c+"&y="+d+"&kkk="+1*new Date,function(c){var d=$("#PU-"+a+"-"+b);d.slideUp().html(c).slideDown();"undefined"!=typeof tb_init&&tb_init(d.find("a.thickbox"));initTooltip(d.find("td[title],span[title],a[title]"));initTabMenus(d)})}
function calcARPBookingDate(){$.getJSON("/calcarp?t="+$("#ARPTrainIDContent").val()+"&s="+$("#ARPStationIDContent").val()+"&p="+$("#ARPType").val()+"&b=-1&d="+$("#ARPDepDateContent-").val()+"&kkk="+1*new Date,function(a){$("#ARPType").val(a.type);a.sv&&($("#ARPStationIDContent").val(a.sv),$("#ARPStationIDBox").val(a.st));$("#ARPBookingDateContent-").val(a.bv);$("#ARPBookingDateBox-").val(a.bt);$("#ARPDepDateContent-").val(a.dv);$("#ARPDepDateBox-").val(a.dt);a.error?$("#ARPMessageRedBox-999").html(a.error).show():
$("#ARPMessageRedBox-999").html("").hide()})}
function calcARPDepDate(){$.getJSON("/calcarp?t="+$("#ARPTrainIDContent").val()+"&s="+$("#ARPStationIDContent").val()+"&p="+$("#ARPType").val()+"&b="+$("#ARPBookingDateContent-").val()+"&d=-1&kkk="+1*new Date,function(a){$("#ARPType").val(a.type);a.sv&&($("#ARPStationIDContent").val(a.sv),$("#ARPStationIDBox").val(a.st));$("#ARPBookingDateContent-").val(a.bv);$("#ARPBookingDateBox-").val(a.bt);$("#ARPDepDateContent-").val(a.dv);$("#ARPDepDateBox-").val(a.dt);a.error?$("#ARPMessageRedBox-999").html(a.error).show():
$("#ARPMessageRedBox-999").html("").hide()})}function addTrainBlogTag(a,b){$("#TrainIDBlogComp").val($("#TrainIDBlogComp").val()+$("#"+a).val()+":");$("#TrainNameBlogComp").html($("#TrainNameBlogComp").html()+$("#"+b).val().replace(/\/.*/,"")+",");$("#"+a).val("");$("#"+b).val("")}
function addStationBlogTag(a,b){$("#StationIDBlogComp").val($("#StationIDBlogComp").val()+$("#"+a).val()+":");$("#StationNameBlogComp").html($("#StationNameBlogComp").html()+$("#"+b).val()+",");$("#"+a).val("");$("#"+b).val("")}
function inlineSuperSearch(a){var b="";window.getSelection?b=window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&(b=document.selection.createRange().text);""!=b&&($("div.inlineSuperSearchBtn").hide(),a.find("div.inlineSuperSearchBtn").show().off("click").click(function(){/\/pnr/.exec(window.location.href)?(resetMyDropDowns(),window.open("/pnr?q="+b.replace(/\?|#/g," ")+"&kkk="+1*new Date,"_self")):/\/blog/.exec(window.location.href)?(resetMyDropDowns(),window.open("/blog?q="+
b.replace(/\?|#/g," ")+"&kkk="+1*new Date,"_self")):/\/news/.exec(window.location.href)&&(resetMyDropDowns(),window.open("/news?q="+b.replace(/\?|#/g," ")+"&kkk="+1*new Date,"_self"))}))}function myCloneListItem(a){a=a.parent().parent();var b="<tr>"+a.html()+"</tr>";$(b).find("input").val("");a.before(b);a.prev().find("input").focus();return!1}
function blogTypeChange(a){var b=a.parents("form");7==a.val()?(b.find("[name=ListContent]").show(),b.find("[name=ListEndTimeNum]").parent().parent().parent().show(),b.find("[name=TrainBlog]").attr("placeholder",b.find("[name=PlaceHolder7]").val())):22==a.val()?(b.find("[name=ListContent]").show(),b.find("[name=ListEndTimeNum]").parent().parent().parent().hide(),b.find("[name=TrainBlog]").attr("placeholder",b.find("[name=PlaceHolder22]").val())):24==a.val()?(b.find("[name=ListContent]").show(),b.find("[name=ListEndTimeNum]").parent().parent().parent().hide(),
b.find("[name=TrainBlog]").attr("placeholder",b.find("[name=PlaceHolder24]").val())):(b.find("[name=ListContent]").hide(),b.find("[name=ListEndTimeNum]").parent().parent().parent().hide(),b.find("[name=TrainBlog]").attr("placeholder",b.find("[name=PlaceHolder0]").val()));b.find("[name=TrainBlog]").focus()}
function initLockUnlockFormBeforeDisplay(a){var b=a.find("[name=LockForm]").get(0),c=a.find("[name=LockText]"),d=a.find("[name=TrainBlogID]"),e=a.find("[name=LockOrUnlock]");b.onsubmit=function(){var a=c.val().replace(/^\s+|\s+$/,"").substring(0,1E4);c.val(a);if(""!=a)return unloadWarning=0,showMessageBoxGreen(555,"Thank you"),thisFunction=function(){document.getElementById("formTargetFrame");var a=d.val();"1"==e.val()?$("#P-"+a).css("background-color","#CCCCCC"):$("#P-"+a).css("background-color",
"#CEEAD1")},tb_remove(),!0;c.focus();showMessageBoxRed(555,"Please type in something");thisFunction=null;return!1};b.onreset=function(){hideMessageBoxRed(555);tb_remove();return!0};c.focus()}
function initActionFormBeforeDisplay(a){var b=a.find("[name=ActionForm]").get(0),c=a.find("[name=Action]"),d=a.find("[name=BlogID]").val(),e=$("#PU-"+d+"-0").find(".imgbox");b.onsubmit=function(){var a=c.val().replace(/^\s+|\s+$/,"").substring(0,1E4);c.val(a);if(""!=a)return $("#PU-"+d+"-0").find("button").replaceWith('<img src="https://st.indiarailinfo.com/images/ajax-loader.gif" />'),unloadWarning=0,showMessageBoxGreen(555,"Thank you"),thisFunction=function(){var a=document.getElementById("formTargetFrame").contentWindow.document,
b=document.createElement("div");b.innerHTML=myTrim(a.body.innerHTML);""!=b.innerHTML&&($("#PU-"+d+"-0").find(".ratingbox").remove(),e.slideUp().html($(b).find(".imgbox").html()).slideDown())},tb_remove(),!0;c.focus();showMessageBoxRed(555,"Please type in something");thisFunction=null;return!1};b.onreset=function(){hideMessageBoxRed(555);tb_remove();return!0};c.focus()}
function initObjFormBeforeDisplay(a){var b=a.find("form"),c=a.find("textarea");b.get(0).onsubmit=function(){var a=c.val().replace(/^\s+|\s+$/,"").substring(0,1E4);c.val(a);if(""!=a)return showMessageBoxGreen(555,"Thank you"),tb_remove(),unloadWarning=0,!0;c.focus();showMessageBoxRed(555,"Please type in something");thisFunction=null;return!1};b.get(0).onreset=function(){hideMessageBoxRed(555);tb_remove();return!0};c.focus()}
function initTrainBlogMakeLower(a,b){confirm("This will convert the entire post below to lower case. There is NO UNDO. Are you sure you want to proceed?")&&$.getJSON("/trainblog/MakeLower?TrainBlogID="+a+"&ReplyNum="+b+"&kkk="+1*new Date,function(c){var d=$("#PU-"+a+"-"+b).find(".blogcontent,.blogreplycontent"),e=d.html();0==c.Error?d.html(e.toLowerCase()).css("backgroundColor","#C6CCFF"):d.html(c.Message+"<br />"+e).css("backgroundColor","#EAA8B7")})}
function enableSpecial(a,b,c){confirm("Please confirm that you wish to ENABLE this member for Chains and Imaginary Trains.")&&$.getJSON("/trainblog/spl?u="+a+"&kkk="+1*new Date,function(a){var e=$("#PU-"+b+"-"+c).find(".blogcontent,.blogreplycontent");a=e.html()+"<br /><br />"+a.Message;e.html(a).css("backgroundColor","#CEEAD1")})}
function initSuspend(a,b){confirm("The Member will be BANNED from the site. He will NOT be able login to the site or post blogs, effective IMMEDIATELY. Please Confirm.")&&$.get("/trainblog/SuspendMember?TrainBlogID="+a+"&ReplyNum="+b+"&kkk="+1*new Date,function(){alert("Thanks.")})}
function initTrainBlogDelete(a,b){$.getJSON("/trainblog/ReportAbuse?TrainBlogID="+a+"&ReplyNum="+b+"&kkk="+1*new Date,function(c){var d=$("#PU-"+a+"-"+b).find(".blogcontent,.blogreplycontent"),e=document.createElement("div");e.innerHTML=c.Message;"0"==c.Error&&d.css("backgroundColor","#FFB5B5");d.after(e)})}
function initTrainBlogRestore(a,b){$.get("/trainblog/RestoreTrainBlog?TrainBlogID="+a+"&ReplyNum="+b+"&kkk="+1*new Date,function(c){$("#PU-"+a+"-"+b).find(".blogcontent,.blogreplycontent").css("backgroundColor","#CEEAD1")})}$(document).ready(function(){$("#FaqEditFormContainer").length&&initFaq();$("#FaqMergeFormContainer").length&&initFaqMerge()});
function filterFaq(){var a=$("#FaqCategoryFilter").val(),b=$("#FaqFilterContent").val();resetMyDropDowns();""!=b?window.open("/faq/post/"+b+"?kkk="+1*new Date,"_self"):window.open("/faq?c="+a+"&kkk="+1*new Date,"_self")}
function initFaqEditFormBeforeDisplay(a,b,c,d,e,f){var g=$("#FaqEditForm");g.find("[name=FaqContent]").val(a);g.find("[name=FaqCategory]").val(b);g.find("[name=FaqBox]").val(c);g.find("[name=TrainBlogID]").val(d);g.find("[name=ReplyNum]").val(e);g.find("[name=NewsID]").val(f);hideMessageBoxRed(999);hideMessageBoxLoading(999)}
function initFaqMergeFormBeforeDisplay(a){var b=$("#FaqMergeForm");b.find("[name=FaqID]").val(a);b.find("[name=NewFaqContent]").val("");b.find("[name=NewFaqBox]").val("");hideMessageBoxRed(9999);hideMessageBoxLoading(9999)}
function initFaqMerge(){var a=$("#FaqMergeForm");a.get(0).onreset=function(){tb_remove();return!0};a.get(0).onsubmit=function(){var b=a.find("[name=FaqID]").val(),c=a.find("[name=NewFaqContent]").val();if(0==c)return showMessageBoxRed(9999,"Please choose a FAQ to merge to."),thisFunction=null,a.find("[name=NewFaqBox]").focus(),!1;if(c==b)return showMessageBoxRed(9999,"Choose a different FAQ. You cannot merge this FAQ into itself."),thisFunction=null,a.find("[name=NewFaqBox]").focus(),!1;thisFunction=
function(){var a=document.getElementById("formTargetFrame").contentWindow.document,c=document.createElement("div");c.innerHTML=a.body.innerHTML;tb_init($(c).find("a.thickbox"));$("#F-"+b).length&&$("#F-"+b).replaceWith(c.innerHTML);hideMessageBoxRed(9999);hideMessageBoxLoading(9999);tb_remove()};return!0}}
function initFaq(){var a=$("#FaqEditForm");a.get(0).onreset=function(){tb_remove();return!0};a.get(0).onsubmit=function(){var b=a.find("[name=FaqContent]").val(),c=a.find("[name=FaqCategory]").val(),d=a.find("[name=FaqBox]").val(),e=a.find("[name=TrainBlogID]").val(),f=a.find("[name=ReplyNum]").val(),g=a.find("[name=NewsID]").val();if((0!=e||0!=g)&&0==b&&""==d)return showMessageBoxRed(999,"Please choose an existing Question or write a new Question."),thisFunction=null,a.find("[name=FaqBox]").focus(),
!1;if((0!=e||0!=g)&&0==b&&""!=d){if(0==c)return showMessageBoxRed(999,"Please choose a Category."),thisFunction=null,a.find("[name=FaqCategory]").focus(),!1;if(!confirm("You are adding a new FAQ Question. Please double-check if a similar FAQ already exists. Do you really wish to create a new Question?"))return!1}else if(""==d)return showMessageBoxRed(999,"Please fill in the FAQ."),thisFunction=null,a.find("[name=FaqBox]").focus(),!1;thisFunction=function(){var a=document.getElementById("formTargetFrame").contentWindow.document,
c=document.createElement("div");c.innerHTML=a.body.innerHTML;tb_init($(c).find("a.thickbox"));$("#F-"+b).length?$("#F-"+b).replaceWith(c.innerHTML):0!=e?($("#PU-"+e+"-"+f).css("backgroundColor","#CEEAD1"),alert("Thanks. Blog Post# "+e+"-"+f+" has now been added to FAQ.")):0!=g&&alert("Thanks. News Entry# "+g+" has now been added to FAQ.");hideMessageBoxRed(999);hideMessageBoxLoading(999);tb_remove()};return!0}}
function initFaqBlogDelete(a,b,c,d){$.getJSON("/faq/remove?f="+a+"&b="+b+"&r="+c+"&n="+d+"&kkk="+1*new Date,function(a){if(0!=b){var f=$("#PU-"+b+"-"+c).find(".blogreplycontent"),g=document.createElement("div");g.innerHTML=a.Message;"0"==a.Error&&f.css("backgroundColor","#FFB5B5");f.after(g);alert("Thanks. Blog Post# "+b+"-"+c+" has now been removed from FAQ.")}else 0!=d&&alert("Thanks. News Entry# "+d+" has now been removed from FAQ.")})}
$(document).ready(function(){$("#UserSettingsFormContainer").length&&initUserSettings($("#UserSettingsFormContainer"))});function filterMembers(){var a=$("#UserContent").val().replace(/\|.*/,""),b=$("#MemberStationContent").val();""!=a?(resetMyDropDowns(),window.open("/members/profile/"+a,"_self")):""!=b&&(resetMyDropDowns(),window.open("/members/station/"+b,"_self"))}
function enableDisableNotifications(a){var b=a.attr("e");$.get("/nf?e="+b+"&kkk="+1*new Date,function(){0==b?a.html("Notifications OFF").css("color","red").attr("e",1):a.html("Notifications ON").css("color","green").attr("e",0);window.location.reload()})}
function initUserSettings(a){var b=a.find("[name=UserSettingsForm]").get(0),c=a.find("[name=UserName]"),d=a.find("[name=PermName]"),e=a.find("[name=EMail]"),f=a.find("[name=PhoneNumber]");new myDropDown(a.find(".mydropdownbox").get(0));a.find("input").keydown(function(a){switch(getEvent(a).keyCode){case 13:return!1}});b.onsubmit=function(){var b=c.val().replace(/^\s+|\s+$/,"").substring(0,50);d.val().replace(/^\s+|\s+$/,"").substring(0,50);var h="";e.val()!=e.attr("label")&&(h=e.val().replace(/^\s+|\s+$/,
"").substring(0,50));var k="";f.val()!=f.attr("label")&&(k=f.val().replace(/^\s+|\s+$/,"").substring(0,15));if(""==b)return showMessageBoxRed(3333,"Please fill in your Screen Name."),c.focus(),thisFunction=null,!1;if(""==k||/^\+?\d+$/.exec(k)){var l=0;a.find("[name=NotificationComps]").each(function(){if($(this).attr("checked")){var a=1*$(this).attr("val");l+=Math.pow(2,a)}});a.find("[name=NotificationBitMap]").val(l);c.val(b);e.val(h);f.val(k);showMessageBoxLoadingNoWaitScreen(3333);thisFunction=
function(){resetMyDropDowns();window.open("/?kkk="+1*new Date,"_self");tb_remove&&tb_remove()};return!0}alert(k);showMessageBoxRed(3333,"The phone number seems invalid. Only digits are allowed.");f.focus();thisFunction=null;return!1};b.onreset=function(){tb_remove&&tb_remove();return!0};a.find("#NearestStationBox").focus()}
function followMember(a,b){$.get("/members/follow?f="+b+"&u="+a+"&kkk="+1*new Date,function(a){1==b?alert("You are now following this member's posts."):alert("Un-Followed.")})}
function myDate(a){var b=this;b.baseName=a.getAttribute("baseName");b.sequenceNumber=a.getAttribute("sequenceNumber");b.label=a.getAttribute("label");b.span=document.getElementById(b.baseName+"Span-"+b.sequenceNumber);b.box=document.getElementById(b.baseName+"Box-"+b.sequenceNumber);b.content=document.getElementById(b.baseName+"Content-"+b.sequenceNumber);b.validDates=b.span.getAttribute("validDates");b.displayPosition=b.span.getAttribute("displayPosition");b.absolutePositioning=b.span.getAttribute("absolutePositioning");
b.pin=b.span.getAttribute("pin");b.arp=b.span.getAttribute("arp");""!=b.span.getAttribute("defaultButtonID")&&(b.defaultButton=document.getElementById(b.span.getAttribute("defaultButtonID")));1==b.pin&&displayDatePicker(b,"down",b.pin,b.validDates,b.arp);b.box.onclick=function(a){if(document.body.onclick)document.body.onclick();document.body.onclick=function(a){closeDatePicker();document.body.onclick=null};displayDatePicker(b,b.displayPosition,0,b.validDates,b.arp);cancelBubble(a)};b.box.onblur=function(a){a=
$(b.box);var d=myParseDate(a.val());""==d?(a.val(b.label),b.content.value="0"):(a.val(d),d=new Date(d),b.content.value=(1*d-6E4*d.getTimezoneOffset())/1E5);a.val()==b.label?(a.removeClass("focustextbox"),a.addClass("blurtextbox")):(a.removeClass("blurtextbox"),a.addClass("focustextbox"))};b.box.onfocus=function(a){a=$(b.box);a.val()==b.label?a.val(""):b.box.select();a.removeClass("blurtextbox");a.addClass("focustextbox")};b.box.onkeydown=function(a){switch(getEvent(a).keyCode){case 13:var d=$(b.box),
e=myParseDate(d.val());""==e?(d.val(b.label),b.content.value="0"):(d.val(e),d=new Date(e),b.content.value=(1*d-6E4*d.getTimezoneOffset())/1E5);null!=b.defaultButton&&(b.defaultButton.click(),b.hideDatePicker());cancelBubble(a);break;case 9:b.hideDatePicker()}}}myDate.prototype.hideDatePicker=function(){var a=document.getElementById("datepicker");a&&visibilityHidden(a)};
myDate.prototype.setDateChangeNotificationFunction=function(a,b){this.dateChangeNotificationFunction=a;this.dateChangeNotificationObject=b};myDate.prototype.afterUpdate=function(){this.dateChangeNotificationFunction&&this.dateChangeNotificationFunction(this.dateChangeNotificationObject)};var pickerDiv,pinDatePicker,arpDatePicker,vDates,dayArrayMed="Sun Mon Tue Wed Thu Fri Sat".split(" "),monthArrayShort="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),datePickerPositionLeft,datePickerPositionTop;
function displayDatePicker(a,b,c,d,e){myDateObject=a;pinDatePicker=c;arpDatePicker=e;vDates=d;a=myDateObject.box;datePickerPositionLeft=a.offsetLeft;for(datePickerPositionTop="down"==b?a.offsetTop+a.offsetHeight:a.offsetTop+3;a.offsetParent;)a=a.offsetParent,datePickerPositionLeft+=a.offsetLeft,datePickerPositionTop+=a.offsetTop;drawDatePicker(b);myDateObject.box.select()}
function drawDatePicker(a){var b=getFieldDate(myDateObject.box.value);document.getElementById("datepicker")||(pickerDiv=document.createElement("div"),pickerDiv.setAttribute("id","datepicker"),pickerDiv.setAttribute("class","dpDiv"),pickerDiv.setAttribute("style","visibility: hidden;"),pinDatePicker?$(pickerDiv).insertBefore(myDateObject.box):document.body.appendChild(pickerDiv));refreshDatePicker(myDateObject.box.id,b.getFullYear(),b.getMonth(),b.getDate());pinDatePicker||(b=pickerDiv.offsetHeight,
pickerDiv.style.position="1"==myDateObject.absolutePositioning?"absolute":"fixed",pickerDiv.style.left=datePickerPositionLeft+"px",pickerDiv.style.top="down"==a?datePickerPositionTop+"px":datePickerPositionTop-1*b+"px",pickerDiv.style.zIndex=1E4);visibilityVisible(pickerDiv);displayBlock(pickerDiv)}
function refreshDatePicker(a,b,c,d,e){var f=new Date;1900==b&&0==c&&1==d?(d=f.getDate(),f.setDate(1)):1970==b&&0==c&&1==d?(d=f.getDate(),f.setDate(1)):0<=c&&0<b?f=new Date(b,c,1):(d=f.getDate(),f.setDate(1));b="<table cols=7 cellpadding=0 cellspacing=0 class='dpTable' >\r\n";c=$(".dpCaption").html();b=null==d?b+("<tr><td colspan=7 class=dpCaption>"+c+"</td></tr>"):b+("<tr><td colspan=7 class=dpCaption>"+getDateString(new Date(f.getFullYear(),f.getMonth(),d))+"</td></tr>");b=b+"<tr class='dpTitleTR'>"+
getYearButtonCode(a,f,-1,"&lt;&lt;","leftyear",e);b+=getButtonCode(a,f,-1,"&lt;","leftmonth",e);b+="<td colspan=3 class='dpTitleTD'><div class='dpTitleText'>"+monthArrayShort[f.getMonth()]+" "+f.getFullYear()+"</div></td>\r\n";b+=getButtonCode(a,f,1,"&gt;","rightmonth",e);b+=getYearButtonCode(a,f,1,"&gt;&gt;","rightyear",e);b+="</tr>\r\n";b+="<tr class='dpDayTR'>";for(i=0;i<dayArrayMed.length;i++)b+="<td class='dpDayTD'>"+dayArrayMed[i]+"</td>\r\n";b+="</tr>\r\n";b+="<tr class='dpTR'>";for(i=0;i<
f.getDay();i++)b+='<td class=\'dpTD\' onMouseOut=\'$(this).attr("class", "dpTD");\' onMouseOver=\'$(this).attr("class", "dpTDHover");\' &nbsp;</td>\r\n';do dayNum=f.getDate(),TD_onclick=" onMouseUp=\"changeSelectedDay(this);updateDateField('"+getDateString(f)+"'); \">",b=0==vDates?dayNum==d?b+('<td class=\'dpDayHighlightTD\' onMouseOut=\'$(this).attr("class", "dpDayHighlightTD");\' onMouseOver=\'$(this).attr("class", "dpTDHover");\' '+TD_onclick+"<div class='dpDayHighlight'>"+dayNum+"</div></td>\r\n"):
b+('<td class=\'dpTD\' onMouseOut=\'$(this).attr("class", "dpTD");\' onMouseOver=\'$(this).attr("class", "dpTDHover");\' '+TD_onclick+dayNum+"</td>\r\n"):0!=(Math.pow(2,f.getDay())&vDates)?dayNum==d?b+('<td class=\'dpDayHighlightTD\' onMouseOut=\'$(this).attr("class", "dpDayHighlightTD");\' onMouseOver=\'$(this).attr("class", "dpTDHover");\' '+TD_onclick+"<div class='dpDayHighlight'>"+dayNum+"</div></td>\r\n"):b+('<td class=\'dpTD_valid\' onMouseOut=\'$(this).attr("class", "dpTD_valid");\' onMouseOver=\'$(this).attr("class", "dpTDHover_valid");\' '+
TD_onclick+dayNum+"</td>\r\n"):b+("<td class='dpTD_invalid' >"+dayNum+"</td>\r\n"),6==f.getDay()&&(b+="</tr>\r\n<tr class='dpTR'>"),f.setDate(f.getDate()+1);while(1<f.getDate());if(0<f.getDay())for(i=6;i>f.getDay();i--)b+='<td class=\'dpTD\' onMouseOut=\'$(this).attr("class", "dpTD");\' onMouseOver=\'$(this).attr("class", "dpTDHover");\' &nbsp;</td>\r\n';b+="</tr>\r\n";d=new Date;d.getDay();d.getMonth();d.getDate();b+="<tr class='dpTodayButtonTR'><td colspan=7 class='dpTodayButtonTD'>";b+="<button id=DatePickerTodayButton>today</button>";
"1"==arpDatePicker&&(b+="<button id=DatePicker60Button>arp60</button>");b=pinDatePicker?b+'<button id=DatePickerCloseButton style="display:none;">close</button>':b+"<button id=DatePickerCloseButton>close</button>";b+="</td>\r\n</tr>\r\n";b+="</table>\r\n";pickerDiv.innerHTML=b;document.getElementById("DatePickerTodayButton").onclick=function(b){var c=1*new Date,d=new Date(c);if(0!=vDates)for(var e=8;0==(Math.pow(2,d.getDay())&vDates)&&0<e--;)c+=864E5,d=new Date(c);refreshDatePicker(a,d.getFullYear(),
d.getMonth(),d.getDate());updateDateField(getDateString(d));cancelBubble(b)};"1"==arpDatePicker&&(document.getElementById("DatePicker60Button").onclick=function(b){var c=1*new Date+5184E6,d=new Date(c);if(0!=vDates)for(var e=8;0==(Math.pow(2,d.getDay())&vDates)&&0<e--;)c-=864E5,d=new Date(c);refreshDatePicker(a,d.getFullYear(),d.getMonth(),d.getDate());updateDateField(getDateString(d));cancelBubble(b)});document.getElementById("DatePickerCloseButton").onclick=function(a){closeDatePicker();myDateObject.box.focus();
cancelBubble(a)}}function changeSelectedDay(a){var b=$(".dpDayHighlightTD").get(0);b&&(b.className="dpTD",b.onmouseout=function(){$(this).attr("class","dpTD")},b.onmouseover=function(){$(this).attr("class","dpTDHover")});a.className="dpDayHighlightTD";a.onmouseout=function(){$(this).attr("class","dpDayHighlightTD")};a.onmouseover=function(){$(this).attr("class","dpTDHover")}}
function getButtonCode(a,b,c,d,e,f){var g=(b.getMonth()+c)%12;b=b.getFullYear()+parseInt((b.getMonth()+c)/12);0>g&&(g+=12,b+=-1);return e==f?"<td class='dpButtonHover' onMouseOver=' this.className=\"dpButtonHover\";' onMouseOut=' this.className=\"dpButton\";' onMouseUp='refreshDatePicker(\""+a+'", '+b+", "+g+', null, "'+e+"\");'>"+d+"</td>":"<td class='dpButton' onMouseOver=' this.className=\"dpButtonHover\";' onMouseOut=' this.className=\"dpButton\";' onMouseUp='refreshDatePicker(\""+a+'", '+b+", "+
g+', null, "'+e+"\");'>"+d+"</td>"}
function getYearButtonCode(a,b,c,d,e,f){c=b.getFullYear()+c;b=b.getMonth();return e==f?"<td class='dpButtonHover' onMouseOver=' this.className=\"dpButtonHover\";' onMouseOut=' this.className=\"dpButton\";' onMouseUp='refreshDatePicker(\""+a+'", '+c+", "+b+', null, "'+e+"\");'>"+d+"</td>":"<td class='dpButton' onMouseOver=' this.className=\"dpButtonHover\";' onMouseOut=' this.className=\"dpButton\";' onMouseUp='refreshDatePicker(\""+a+'", '+c+", "+b+', null, "'+e+"\");'>"+d+"</td>"}
function getDateString(a){var b="00"+a.getDate(),c="00"+(a.getMonth()+1),b=b.substring(b.length-2),c=c.substring(c.length-2);"01"==c?c="Jan":"02"==c?c="Feb":"03"==c?c="Mar":"04"==c?c="Apr":"05"==c?c="May":"06"==c?c="Jun":"07"==c?c="Jul":"08"==c?c="Aug":"09"==c?c="Sep":"10"==c?c="Oct":"11"==c?c="Nov":"12"==c&&(c="Dec");return c+" "+b+", "+a.getFullYear()}
function getFieldDate(a){var b,c,d,e,f;try{(c=splitDateString(a))?(d=parseInt(c[0],10),e=parseInt(c[1],10)-1,f=parseInt(c[2],10),b=new Date(f,e,d)):b=a?new Date(a):new Date}catch(g){b=new Date}return b}function splitDateString(a){return 0<=a.indexOf("/")?a.split("/"):0<=a.indexOf(".")?a.split("."):0<=a.indexOf("-")?a.split("-"):0<=a.indexOf("\\")?a.split("\\"):!1}
function updateDateField(a){a=myParseDate(a);myDateObject.box.value=a;var b=new Date(a);myDateObject.content.value=(1*b-6E4*b.getTimezoneOffset())/1E5;myDateObject.afterUpdate();pinDatePicker?$(".dpCaption").html(a):(visibilityHidden(pickerDiv),myDateObject.box.focus())}function closeDatePicker(){pinDatePicker||visibilityHidden(pickerDiv)}
function trnAcc(a){var b=$("#AccDateContent-999").val(),c=$("#AccQuota").val(),d=a.attr("colSpan"),e=a.attr("trainNumber"),f=a.attr("fromStationCode"),g=a.attr("toStationCode");$("#Ref"+b).html('<td style="background-color:red;color:white;text-align:center;" colspan='+d+">wait</td>");$(".refacc4").attr("dateVal",b);$(".refacc4").attr("quotaID",c);$(".refacc4").attr("trainNumber",e);$(".refacc4").attr("fromStationCode",f);$(".refacc4").attr("toStationCode",g);a.parents(".acccontainerbox").find(".spinner").each(function(){$(".refacc4").attr("classCode",
$(this).attr("classCode"));$(".refacc4").trigger("click")})}function srhAcc(){0!=1*$("#AccDateContent-998").val()&&($(".acctile").each(function(){$(this).find("table").hide();$(this).html($(this).html()+'<span style="color:red;">wait</span>')}),setTimeout(srhAcc2,3E3))}
function srhAcc2(){var a=1*$("#AccDateContent-998").val(),b=$("#AccQuota").val();$(".refacc4").attr("dateVal",a);$(".refacc4").attr("quotaID",b);$("table.spinnersrh div").each(function(){var a=$(this).parents("table.spinnersrh"),b=a.attr("trn"),e=a.attr("frm"),a=a.attr("to"),f=$(this).attr("cls");$(".refacc4").attr("trainNumber",b);$(".refacc4").attr("fromStationCode",e);$(".refacc4").attr("toStationCode",a);$(".refacc4").attr("classCode",f);$(".refacc4").trigger("click")})}
function calAcc(a){if(0!=a){$(".acctile[dt="+a+"]").each(function(){$(this).find("table").hide();$(this).html($(this).html()+'<span style="color:red;text-align:center;">wait</span>')});var b=$("#AccQuota").val();$(".refacc4").attr("dateVal",a/1E5);$(".refacc4").attr("quotaID",b);$("table.spinnersrh[dt="+a+"] div").each(function(){var a=$(this).parents("table.spinnersrh"),b=a.attr("trn"),e=a.attr("frm"),a=a.attr("to"),f=$(this).attr("cls");$(".refacc4").attr("trainNumber",b);$(".refacc4").attr("fromStationCode",
e);$(".refacc4").attr("toStationCode",a);$(".refacc4").attr("classCode",f);$(".refacc4").trigger("click")})}}
function calAccTrn(a,b){if(0!=b){var c=a.find(".acctile");c.find("table").hide();c.html(c.html()+'<span style="color:red;">wait</span>');c=$("#AccQuota").val();$(".refacc4").attr("dateVal",b/1E5);$(".refacc4").attr("quotaID",c);a.find("table.spinnersrh div").each(function(){var a=$(this).parents("table.spinnersrh"),b=a.attr("trn"),c=a.attr("frm"),a=a.attr("to"),g=$(this).attr("cls");$(".refacc4").attr("trainNumber",b);$(".refacc4").attr("fromStationCode",c);$(".refacc4").attr("toStationCode",a);$(".refacc4").attr("classCode",
g);$(".refacc4").trigger("click")})}}$(document).ready(function(){$("#RefFareBtn1").length&&refreshFares($("#RefFareBtn1"))});
function refreshFares(a){var b=a.attr("trainNumber"),c=a.attr("fromStationCode"),d=a.attr("toStationCode"),e=a.attr("accDateLong"),f=$("#AccConc").val(),e=0==e?1*new Date:1E5*e+6E4*(new Date).getTimezoneOffset();$.each($("div.spinner"),function(){var a=$(this).attr("classCode"),h=$(this).attr("ageID");0==$(this).attr("fare")&&($(this).show(),$.get("/flm?trn="+b+"&d="+(new Date(e)).getDate()+"&m="+(1*(new Date(e)).getMonth()+1)+"&y="+(new Date(e)).getFullYear()+"&src="+c+"&dst="+d+"&cls="+a+"&ageID="+
h+"&concID="+f,function(e){""!=e&&$.post("/updatefare",{trainNumber:b,fromStationCode:c,toStationCode:d,ageID:h,concID:f,classCode:a,dataFare:e},function(a){a=JSON.parse(a);$("#FareBox-"+a.ageID).html(a.main);initTooltip($("span.age[title]"))})}))})}
function refreshTrainStatus(a,b){a.hide().after('<span style="color:red;">&nbsp;&nbsp;wait</span>');var c=a.attr("trainID"),d=a.attr("trainNumber"),e=a.attr("listID");$.get("/train/reftrn?y=0&trainID="+c+"&trainNumber="+d+"&listID="+e+"&kkk="+1*new Date,function(c){0==b?a.parent().parent().hide().html(c).slideDown():window.location.reload()})}
function refreshTrainTT(a){a.parent().html("Please Wait...");$.get("/train/AddTrainSchedule?trainID="+a.attr("trainID")+"&trainNumber="+a.attr("trainNumber")+"&kkk="+1*new Date,function(){window.location.reload()})}
function initAddTrainForm(){var a;if($("[name=AddTrainForm]").length){a=$("[name=AddTrainForm]").first();new myDate($("#RunDateFromSpan-").get(0));new myDate($("#RunDateToSpan-").get(0));var b=a.find("[name=TrainNumber]"),c=a.find("[name=MyTrainName]");a.find("[name=ClassesOffered]");a.find("[name=DepartureDaysOfWeek]");var d=a.find("[name=Type]"),e=a.find("[name=UpdateType]");$("#UpdateTrainBtnManual").click(function(){e.val(1);showMessageBoxLoadingNoWaitScreen(7777);$("#UpdateTrainBtn").trigger("click")});
$("#UpdateTrainBtnGov").click(function(){e.val(2);showMessageBoxLoadingNoWaitScreen(7777);$("#UpdateTrainBtn").trigger("click")});$("#UpdateTrainBtnTE").click(function(){e.val(3);showMessageBoxLoadingNoWaitScreen(7777);$("#UpdateTrainBtn").trigger("click")});$("#UpdateTrainBtn0").click(function(){var f=b.val().replace(/^\s+|\s+$/,"").substring(0,255),g=c.val().replace(/^\s+|\s+$/,"").substring(0,255),h=d.val();if(""==f)return showMessageBoxRed(7777,"Please enter Train Number"),b.focus(),thisFunction=
null,!1;if(/^(\d{5})(-Slip\d?)?$/.exec(f)){if(""==g)return showMessageBoxRed(7777,"Please enter Train Name"),c.focus(),thisFunction=null,!1;if(0==h||99==h)return showMessageBoxRed(7777,"Please select a Type"),d.focus(),thisFunction=null,!1}else return showMessageBoxRed(7777,"Only 5-digit Numbers are accepted"),b.focus(),thisFunction=null,!1;var k=0,l=0;a.find("[name=ClassesOffered]").each(function(){$(this).attr("checked")&&(l=0==k?Math.pow(2,9):l+Math.pow(2,k-1));k++});a.find("[name=ClassesOfferedComposite]").val(l);
l=k=0;a.find("[name=DepartureDaysOfWeek]").each(function(){$(this).attr("checked")&&(l+=Math.pow(2,k));k++});a.find("[name=DepartureDaysOfWeekComposite]").val(l);if(0==a.find("[name=ClassesOfferedComposite]").val())return showMessageBoxRed(7777,"Please select at least one Train Class"),c.focus(),thisFunction=null,!1;var n=$("#TTEditorTable tr").length,r="",p=0,m=0,q="";$("#TTEditorTable tr").each(function(){if($(this).find("[name=seq]").length){var a=$(this).find("[name=seq]").first().val(),b=$(this).find("[name=StationIDHaltContent]").first().val(),
c=$(this).find("[name=ArrHr"+a+"]").first().val(),d=$(this).find("[name=ArrMin"+a+"]").first().val(),e=$(this).find("[name=DepHr"+a+"]").first().val(),f=$(this).find("[name=DepMin"+a+"]").first().val(),g=0;k=0;$(this).find("[name=HaltType"+a+"]").each(function(){$(this).attr("checked")&&(g=k);k++});""==b&&(m=1,q="All rows in the TT Editor need to have valid Stations, with Arrival/Departure times.");0==p&&0!=60*c+1*d&&(m=1,q="Source Station needs to have Blank Arrival Time.");p==n.length-1&&0!=60*
e+1*f&&(m=1,q="Destination Station needs to have Blank Departure Time.");0<p&&0==60*c+1*d&&(m=1,q="Arrival Time is Blank at one of the Stations.");p<n.length-1&&0==60*e+1*f&&(m=1,q="Departure Time is Blank at one of the Stations.");r+=b+","+(60*c+1*d)+","+(60*e+1*f)+","+g+";";p++}});if(1==m)return showMessageBoxRed(7777,q),thisFunction=null,!1;if(""==r)return showMessageBoxRed(7777,"TT Editor is Blank."),thisFunction=null,!1;$("[name=TTEditor]").val(r);e.val(4);showMessageBoxLoadingNoWaitScreen(7777);
$("#UpdateTrainBtn").trigger("click");return!1});a.get(0).onsubmit=function(){thisFunction=function(){var a=document.getElementById("formTargetFrame").contentWindow.document;if(4==e.val()){var a=eval("("+a.body.innerHTML+")"),b=a.Message;0==a.Error?null!=a.TrainID&&(showMessageBoxGreen(7777,b),resetMyDropDowns(),window.open("/train/"+a.TrainID+"?kkk="+1*new Date,"_self")):showMessageBoxRed(7777,b)}else a=JSON.parse(a.body.innerHTML),1==a.Error?showMessageBoxRed(7777,"Could not Fetch Info."):2==a.Error?
showMessageBoxRed(7777,a.Message.replace(/myquot;/g,'"').replace(/mylt;/g,"<").replace(/mygt;/g,">")):1==a.SameTT?showMessageBoxRed(7777,"NO CHANGE in TT."):showMessageBoxGreen(7777,"TT has CHANGED."),$("#TTEditorComp").replaceWith(a.TT.replace(/myquot;/g,'"').replace(/mylt;/g,"<").replace(/mygt;/g,">")),$("#TTEditorTable").find(".mydropdownbox").each(function(){new myDropDown(this)});hideMessageBoxLoading(7777)};return!0};a.get(0).onreset=function(){window.open("/?kkk="+1*new Date,"_self");return!0};
b.focus()}}function syncDep(a){var b=a.parent().parent(),c=b.find("[name=seq]").first().val();a=b.find("[name=ArrHr"+c+"]").first();var d=b.find("[name=ArrMin"+c+"]").first(),e=b.find("[name=DepHr"+c+"]").first(),b=b.find("[name=DepMin"+c+"]").first();0==e.val()&&0==b.val()&&(e.val(a.val()),b.val(d.val()));return!1}
function myClone(a,b){var c=a.parent().parent();$.get("/train/e?c=1&kkk="+1*new Date,function(a){b?c.before(a):c.after(a);a=$(a).find(".mydropdownbox").get(0);new myDropDown(a);return!1});return!1}
function initMyTrainList(a){var b=a.find("[name=MyTrainListForm]").get(0);b.onsubmit=function(){if(""==a.find("[name=l]").val())return showMessageBoxRed(7771,"Please specify a Name for the List."),!1;showMessageBoxLoadingNoWaitScreen(7771);thisFunction=function(){var a=document.getElementById("formTargetFrame").contentWindow.document,a=eval("("+a.body.innerHTML+")").ListID;tb_remove();hideMessageBoxLoading(7771);resetMyDropDowns();window.open("/mytrains/"+a+"?kkk="+1*new Date,"_self")};return!0};
b.onreset=function(){tb_remove();return!0};a.find("[name=n]").focus()}
function initMyTrains(a){var b=a.find("[name=MyTrainsForm]").get(0);$(b).find(".mydropdownbox").each(function(){new myDropDown(this)});b.onsubmit=function(){var b=a.find("[name=MyTrainsFromStationIDContent]").val().replace(/\|.*$/,""),d=a.find("[name=MyTrainsFromStationIDContent]").val().replace(/^.*\|/,""),e=a.find("[name=MyTrainsToStationIDContent]").val().replace(/\|.*$/,""),f=a.find("[name=MyTrainsToStationIDContent]").val().replace(/^.*\|/,""),g=a.find("[name=MyTrainsListID]").val();if(""==a.find("[name=MyTrainsTrainIDContent]").val()||
""==b||""==e)return showMessageBoxRed(7771,"Please fill in all fields."),!1;if(1*d==1*f)return showMessageBoxRed(7771,"Departure and Arrival Stations cannot be the same. Please change."),$("#FilterTripFromStationBox").focus(),!1;if(1*d>1*f)return showMessageBoxRed(7771,"Stations are in opposite order. Please change."),$("#FilterTripFromStationBox").focus(),!1;showMessageBoxLoadingNoWaitScreen(7771);thisFunction=function(){hideMessageBoxLoading(7771);tb_remove();resetMyDropDowns();window.open("/mytrains/"+
g+"?kkk="+1*new Date,"_self")};return!0};b.onreset=function(){tb_remove();return!0};a.find("[name=MyTrainsTrainIDBox]").focus()}function myTrainListOnChange(a){9999==a.val()?tb_show(null,"/mytrains/l?l=0&height=200&width=450&modal=false&afterLoad=initMyTrainList",null):(resetMyDropDowns(),window.open("/mytrains/"+a.val()+"?kkk="+1*new Date,"_self"))}
function addToMyTrains(a,b,c,d){$.post("/mytrains/s",{MyTrainsListID:0,MyTrainsTrainIDContent:b,MyTrainsFromStationIDContent:c,MyTrainsToStationIDContent:d,AddRemove:0},function(b){a.replaceWith('<span>Train Added</span>&nbsp;&nbsp;<a href=/mytrains>Click here to check your "My Trains" list</a>')})}
function removeMyTrainList(a){confirm("All Trains in this List will also be removed. Do you want to proceed?")&&$.post("/mytrains/l",{l:a,AddRemove:1},function(a){resetMyDropDowns();window.open("/mytrains?kkk="+1*new Date,"_self")})}function removeMyTrain(a,b,c,d){$.post("/mytrains/s",{MyTrainsListID:a,MyTrainsTrainIDContent:b,MyTrainsFromStationIDContent:c,MyTrainsToStationIDContent:d,AddRemove:1},function(b){resetMyDropDowns();window.open("/mytrains/"+a+"?kkk="+1*new Date,"_self")})}
function initTrainPantry(a){var b=a.find("[name=PantryForm]").get(0),c=a.find("[name=Pantry]");initTileSel(a);b.onsubmit=function(){tb_remove();return!0};b.onreset=function(){tb_remove();return!0};c.focus()}var rtgPrevSel;function initTrainPlatform(a){var b=a.find("[name=PlatformForm]").get(0);a=a.find("[name=Platforms]");b.onsubmit=function(){tb_remove();return!0};b.onreset=function(){tb_remove();return!0};a.focus()}
function initTrnStnRating(a){a=a.find("[name=RatingForm]");a.submit(function(){tb_remove();return!0});a.get(0).onreset=function(){tb_remove();return!0}}function initTrainCT(a){a=a.find("[name=ClassForm]");a.submit(function(){tb_remove();return!0});a.get(0).onreset=function(){tb_remove();return!0}}
function initTrainClass(a){var b=a.find("[name=ClassForm]");b.find(".tilesel td").click(function(){$(this).hasClass("avl")?$(this).removeClass("avl"):$(this).addClass("avl");var a=0,d=0;$(this).parent().find("td").each(function(){$(this).hasClass("avl")&&(d=0==a?Math.pow(2,9):d+Math.pow(2,a-1));a++});b.find("[name=ClsComp]").val(d)});b.submit(function(){tb_remove();return!0});b.get(0).onreset=function(){tb_remove();return!0}}
function initTrainDep(a){var b=a.find("[name=DepForm]");b.submit(function(){var a=0,d=0;b.find("[name=DepartureDaysOfWeek]").each(function(){$(this).attr("checked")&&(d+=Math.pow(2,a));a++});b.find("[name=DepComp]").val(d);tb_remove();return!0});b.get(0).onreset=function(){tb_remove();return!0}}
function initTrainReturn(a){a.find(".mydropdownbox").each(function(){new myDropDown(this)});var b=a.find("[name=ReturnForm]").get(0);a=a.find("[name=ReturnIDBox]");b.onsubmit=function(){tb_remove();return!0};b.onreset=function(){tb_remove();return!0};a.focus()}function initTrainZone(a){var b=a.find("[name=ZoneForm]").get(0);a=a.find("[name=ZoneID]");b.onsubmit=function(){tb_remove();return!0};b.onreset=function(){tb_remove();return!0};a.focus()}
function initSvMbr(a){a.find(".mydropdownbox").each(function(){new myDropDown(this)});var b=a.find("[name=GroupForm]").get(0);b.onsubmit=function(){unloadWarning=0;thisFunction=function(){var b=document.getElementById("formTargetFrame").contentWindow.document,d=document.createElement("div");d.innerHTML=myTrim(b.body.innerHTML);/^1:/.exec(d.innerHTML)?a.find(".messageboxred").html(d.innerHTML.replace(/^\d:/,"")).show():(a.find(".messageboxgreen").html(d.innerHTML.replace(/^\d:/,"")).show(),setTimeout(function(){tb_remove()},
1E3))};return!0};b.onreset=function(){tb_remove();return!0};a.find("[name=GroupUserIDBox]").length&&a.find("[name=GroupUserIDBox]").focus()}function initTrainPOS(a){var b=a.find("[name=POSForm]").get(0),c=a.find("[name=POS]");a.find(".mydropdownbox").each(function(){new myDropDown(this)});b.onsubmit=function(){tb_remove();return!0};b.onreset=function(){tb_remove();return!0};c.focus()}
function initTrainType(a){var b=a.find("[name=TypeForm]").get(0);a=a.find("[name=TypeID]");b.onsubmit=function(){tb_remove();return!0};b.onreset=function(){tb_remove();return!0};a.focus()}
function initTrainHalt(a){a.find(".mydropdownbox").each(function(){new myDropDown(this)});var b=a.find("[name=HaltDetailsForm]"),c=b.find("[name=RegularStopBox]"),d=b.find("[name=TechnicalStopBox]"),e=b.find("[name=PassesThruBox]");c.click(function(){$(this).attr("checked")&&(d.removeAttr("checked"),e.removeAttr("checked"))});d.click(function(){$(this).attr("checked")&&(c.removeAttr("checked"),e.removeAttr("checked"))});e.click(function(){$(this).attr("checked")&&(c.removeAttr("checked"),d.removeAttr("checked"))});
b.submit(function(){b.find("[name=LocoReversalBox]").attr("checked")&&b.find("[name=LocoReversal]").val(1);c.attr("checked")?b.find("[name=RegularStop]").val(1):b.find("[name=RegularStop]").val(0);d.attr("checked")?b.find("[name=TechnicalStop]").val(1):b.find("[name=TechnicalStop]").val(0);e.attr("checked")?b.find("[name=PassesThru]").val(1):b.find("[name=PassesThru]").val(0);tb_remove();return!0});b.get(0).onreset=function(){tb_remove();return!0}}
function rtgUserClick(a,b,c,d){var e=$(".rtgusers[trainID="+b+"]");e.length||(e=a.parent().find(".rtgusers"),$(document.body).append(e),e.attr("trainID",b));if(/2px/i.exec(a.attr("style")))a.css("border",""),e.slideUp(),rtgPrevSel=null;else{rtgPrevSel&&(rtgPrevSel.css("border",""),e.slideUp());a.css("border","2px dotted red");var f;0!=b?f="/train/rtg?l=1&TrainID="+b+"&cat="+d+"&kkk="+1*new Date:0!=c&&(f="/station/rtg?l=1&StationID="+c+"&cat="+d+"&kkk="+1*new Date);$.get(f,function(b){e.html(b);"undefined"!=
typeof tb_init&&tb_init(e.find("a.thickbox"));initTooltip(e.find("td[title],span[title],a[title]"));initTabMenus(e);b=$(document).width();a.offset().left+a.outerWidth()+210>b?e.css("left",a.offset().left-210+"px").slideDown():e.css("left",a.offset().left-105+"px").slideDown();e.css("top",a.offset().top+a.outerHeight()+"px").slideDown()});rtgPrevSel=a}return!1}
function initTrainNews(a){var b=a.find("[name=NewsForm]").get(0),c=a.find("[name=NewsContent]"),d=a.find("[name=NewsID]");b.onsubmit=function(){var a=c.val().replace(/^\s+|\s+$/,"");c.val(a);var b=d.val();if(""==b||/^\d*$/.exec(b))return""!=a?(tb_remove(),!0):!1;thisFunction=null;return!1};b.onreset=function(){tb_remove();return!0};c.focus()}
function initTrainDescription(a){var b=a.find("[name=DescriptionForm]").get(0),c=a.find("[name=Description]"),d=a.find("[name=PurposeID]");b.onsubmit=function(){var a=c.val().replace(/^\s+|\s+$/,"");c.val(a);d.val();return""!=a?(tb_remove(),!0):!1};b.onreset=function(){tb_remove();return!0};c.focus()}
function initTrainCancel(a){var b=a.find("[name=CancelForm]").get(0),c=a.find("[name=NewsContent]"),d=a.find("[name=NewsID]");b.onsubmit=function(){var a=c.val().replace(/^\s+|\s+$/,"");c.val(a);var b=d.val();if(""==b||/^\d*$/.exec(b))return""!=a?(tb_remove(),!0):!1;thisFunction=null;return!1};b.onreset=function(){tb_remove();return!0};c.focus()}
function initTrainRake(a){var b=a.find("[name=RakeForm]").get(0),c=a.find("[name=Rake]").get(0);b.onsubmit=function(){var a=c.value.replace(/^\s+|\s+$/,"").substring(0,1024);c.value=a;return""!=a?(tb_remove(),!0):!1};b.onreset=function(){tb_remove()};c.focus()}
function initTrainRSA(a){var b=a.find("[name=RSAForm]").get(0),c=a.find("[name=RSA]").get(0);b.onsubmit=function(){var a=c.value.replace(/^\s+|\s+$/,"").substring(0,1024);c.value=a;return""!=a?(tb_remove(),!0):!1};b.onreset=function(){tb_remove()};c.focus()}
function initLocoTrain(a){a.find(".mydropdownbox").each(function(){new myDropDown(this)});var b=a.find("[name=TrainForm]").get(0),c=a.find("[name=TrainIDLocoContent]").get(0),d=a.find("[name=FromStationIDLocoContent]").get(0),e=a.find("[name=ToStationIDLocoContent]").get(0);b.onsubmit=function(){return""!=c.val()&&""!=d.val()&&""!=e.val()?(tb_remove(),!0):!1};b.onreset=function(){tb_remove()};c.focus()}
function initTrainLoco(a){a.find(".mydropdownbox").each(function(){new myDropDown(this)});var b=a.find("[name=LocoForm]").get(0),c=a.find("[name=LocoTypeIDContent]").get(0),d=a.find("[name=LocoIDs]").get(0);b.onsubmit=function(){var a=d.value.replace(/^\s+|\s+$/,"").substring(0,1024);d.value=a;if(""!=a)return tb_remove(),!0;alert('Please enter Loco Details and press the "Add" button to add one or more Locos.');c.focus();return!1};b.onreset=function(){tb_remove()};c.focus()}
function initBD(a){var b=a.find("[name=BDForm]").get(0),c=a.find("[name=Month]").get(0),d=a.find("[name=Day]").get(0);b.onsubmit=function(){var a=1*d.value;return 0!=1*c.value&&0!=a?(tb_remove(),!0):!1};b.onreset=function(){tb_remove()};a.find(".mydatebox").each(function(){new myDate(this)});c.focus()}
function initTrainName(a){var b=a.find("[name=NameForm]").get(0),c=a.find("[name=Name]").get(0);b.onsubmit=function(){var a=c.value.replace(/^\s+|\s+$/,"").substring(0,1024);c.value=a;return""!=a?(tb_remove(),!0):!1};b.onreset=function(){tb_remove()};a.find(".mydatebox").each(function(){new myDate(this)});c.focus()}
function initChainName(a){var b=a.find("[name=NameForm]").get(0),c=a.find("[name=Name]").get(0);b.onsubmit=function(){var a=c.value.replace(/^\s+|\s+$/,"").substring(0,1024);c.value=a;return""!=a?(tb_remove(),!0):!1};b.onreset=function(){tb_remove()};c.focus()}
function initAddChainForm(a){a.find(".mydropdownbox").each(function(){new myDropDown(this)});a.find("[name=AddChainForm]").get(0).onsubmit=function(){if(""==a.find("[name=ChainName]").val())return showMessageBoxRed(7777,"Please enter a name for this &Sigma;Chain"),a.find("[name=ChainName]").focus(),thisFunction=null,!1;if(""==a.find("[name=ChainDescription]").val())return showMessageBoxRed(7777,"Please enter a description for this &Sigma;Chain"),a.find("[name=ChainDescription]").focus(),thisFunction=
null,!1;thisFunction=function(){var a=document.getElementById("formTargetFrame").contentWindow.document,c=eval("("+a.body.innerHTML+")"),a=c.Message;"0"==c.Error?(c=c.ChainID,showMessageBoxGreen(0,a),tb_remove(),resetMyDropDowns(),window.open("/chain/"+c+"?kkk="+1*new Date,"_self")):showMessageBoxRed(7777,a);hideMessageBoxLoading(7777)};return!0};a.find("[name=AddChainForm]").get(0).onreset=function(){tb_remove();return!0};a.find("[name=ChainName]").focus()}
function chainRate(a,b,c){a.find("select").replaceWith('<img src="https://st.indiarailinfo.com/images/ajax-loader.gif" />');2==c?(tb_show("","/chain/rate?c="+b+"&t="+c+"&kkk="+1*new Date+"&height=150&width=350&modal=true&afterLoad=initObjFormBeforeDisplay",""),thisFunction=function(){var b=document.getElementById("formTargetFrame").contentWindow.document,c=document.createElement("div");c.innerHTML=myTrim(b.body.innerHTML);""!=c.innerHTML&&(a.slideUp().html(c.innerHTML).slideDown(),initTooltip(a.find("td[title],span[title],a[title]")))}):
$.get("/chain/rate?c="+b+"&t="+c+"&kkk="+1*new Date,function(b){a.slideUp().html(b).slideDown();initTooltip(a.find("td[title],span[title],a[title]"))})}
function trainRate(a,b,c,d){3==c?(a.find("select").replaceWith('<img src="https://st.indiarailinfo.com/images/ajax-loader.gif" />'),$.get("/train/rate?tr="+b+"&ty="+c+"&u="+d+"&kkk="+1*new Date,function(b){a.slideUp().html(b).slideDown();initTooltip(a.find("td[title],span[title],a[title]"))})):(a.find("select").replaceWith('<img src="https://st.indiarailinfo.com/images/ajax-loader.gif" />'),2==c?(tb_show("","/train/rate?tr="+b+"&ty="+c+"&kkk="+1*new Date+"&height=150&width=350&modal=true&afterLoad=initObjFormBeforeDisplay",
""),thisFunction=function(){var b=document.getElementById("formTargetFrame").contentWindow.document,c=document.createElement("div");c.innerHTML=myTrim(b.body.innerHTML);""!=c.innerHTML&&(a.length?a.slideUp().html(c.innerHTML).slideDown():window.location.reload(),initTooltip(a.find("td[title],span[title],a[title]")))}):$.get("/train/rate?tr="+b+"&ty="+c+"&kkk="+1*new Date,function(b){a.slideUp().html(b).slideDown();initTooltip(a.find("td[title],span[title],a[title]"))}))}
function getChainRatings(a,b){a.is(":visible")?a.slideUp():$.get("/chain/cr?c="+b+"&kkk="+1*new Date,function(b){a.html(b).slideDown();initTooltip(a.find("span[title]"))})}function getTrainRatings(a,b){a.is(":visible")?a.slideUp():$.get("/train/tr?t="+b+"&kkk="+1*new Date,function(b){a.html(b).slideDown();initTooltip(a.find("span[title]"))})}
function initPlaceLink(){$("#PlaceLink").get(0).onclick=function(){$("#EditStationPlaceDiv").slideDown();$("#LocalNameBox").focus();$("#PlaceLink").hide();$("#PlaceUpdatedBy").hide()};$("#PlaceButton").click(function(){var a=myTrim($("#LocalNameBox").val()),b=myTrim($("#RegNameBox").val()),c=myTrim($("#HindiNameBox").val()),d=myTrim($("#PlaceBox").val()).replace(/<|>/g,""),e=$("#StateContent").val();""==b&&""==c||""==d?$("#PlaceErrorMessage").show():$.getJSON("/station/SaveStationPlace?s="+$("#PlaceLink").attr("StationID")+
"&ln="+a+"&rn="+b+"&hn="+c+"&p="+d+"&st="+e+"&kkk="+1*new Date,function(a){window.location.reload()})});$("#PlaceLink").get(0).onclick()}function initStationZone(a){a.find(".mydropdownbox").each(function(){new myDropDown(this)});var b=a.find("[name=ZoneForm]").get(0);a=a.find("[name=ZoneID]");b.onsubmit=function(){tb_remove();return!0};b.onreset=function(){tb_remove();return!0};a.focus()}
function initLocoBoardPic(a){var b=a.find("[name=BoardPicForm]").get(0),c=a.find("[name=LocoTypeIDContent]").get(0),d=a.find("[name=LocoIDs]").get(0);null!=b&&(a.find(".mydropdownbox").each(function(){new myDropDown(this)}),b.onsubmit=function(){var b=d.value.replace(/^\s+|\s+$/,"").substring(0,1024);d.value=b;if(""!=b)return populatePicType(a),tb_remove(),!0;alert('Please enter Loco Details and press the "Add" button to add one or more Locos.');c.focus();return!1},b.onreset=function(){tb_remove();
return!0},locoBoxSel.focus())}function initTrainBoardPic(a){var b=a.find("[name=BoardPicForm]").get(0),c=a.find("[name=TrainIDBoardPicBox]");null!=b&&(a.find(".mydropdownbox").each(function(){new myDropDown(this)}),b.onsubmit=function(){populatePicType(a);tb_remove();return!0},b.onreset=function(){tb_remove();return!0},c.focus())}
function initStationBoardPic(a){var b=a.find("[name=BoardPicForm]").get(0),c=a.find("[name=StationIDBoardPicBox]");null!=b&&(a.find(".mydropdownbox").each(function(){new myDropDown(this)}),b.onsubmit=function(){populatePicType(a);tb_remove();return!0},b.onreset=function(){tb_remove();return!0},c.focus())}function populatePicType(a){var b=0;a.find("[name=PicTypeComps]").each(function(){if($(this).attr("checked")){var a=$(this).val();b+=Math.pow(2,a)}});a.find("[name=PicType]").val(b)}
function refArrDep(a){a.hide().after('<span style="color:red;">&nbsp;&nbsp;wait</span>');a=a.attr("stationID");$.get("/train/refarrdep?s="+a,function(a){window.location.reload()})}var prevT;
function initSchInlineCapsules(a){var b=$(".schtable");a&&(b=a.find(".schtable"));b.length&&(b.find("tr.mainstn").click(function(){var a=$(this).attr("firstSerNum"),c=$(this).attr("lastSerNum");b.find(".substn[firstSerNum="+a+"][lastSerNum="+c+"]").toggle();$(this).toggleClass("clickhighlighted")}),b.find("tr.mainstn").hover(function(){$(this).addClass("hoverhighlighted");$(this).find("span").addClass("hoverhighlighted")},function(){$(this).removeClass("hoverhighlighted");$(this).find("span").removeClass("hoverhighlighted")}));
var c=$(".newschtable");c.length&&(c.find("tr.intrmdtstn").click(function(){var a=$(this).attr("seqNum"),b=$(this).attr("firstSerNum"),f=$(this).attr("lastSerNum"),g=$(this).attr("trn"),h=$(this),k=c.find(".substn[firstSerNum="+b+"][lastSerNum="+f+"]");k.length?k.remove():$.get(location.href.replace(/\?.*/,"")+"?i=1&trn="+g+"&seqNum="+a+"&firstSerNum="+b+"&lastSerNum="+f,function(a){h.after(a);tb_init(c.find(".substn[firstSerNum="+b+"][lastSerNum="+f+"] a.thickbox"));initTooltip(c.find(".substn[firstSerNum="+
b+"][lastSerNum="+f+"] [title]"));c.find("tr.mapstn").off("click");c.find("tr.mapstn").on("click",function(){$(this).attr("rail")?highlightRailMarker($(this).attr("ts"),$(this).attr("ds"),!0,!0):highlightStationMarker($(this).attr("stationID"),$(this).attr("ts"),$(this).attr("ds"))})})}),c.find("tr.intrmdtstn2").click(function(){var a=$(this).attr("mainStationID");$(this);a=c.find(".substn[mainStationID="+a+"]");$(this).after(a);a.toggle()}),c.find("tr.intrmdtstn,tr.intrmdtstn2").hover(function(){$(this).addClass("hoverhighlighted");
$(this).find("span").addClass("hoverhighlighted")},function(){$(this).removeClass("hoverhighlighted");$(this).find("span").removeClass("hoverhighlighted")}),c.find("tr.mapstn").on("click",function(){$(this).attr("rail")?highlightRailMarker($(this).attr("ts"),$(this).attr("ds"),!0,!0):highlightStationMarker($(this).attr("stationID"),$(this).attr("ts"),$(this).attr("ds"))}))}
function showTrnDet(a){var b=a.parent().parent().next();b.find(".rowlistingcapsulehalf");var c=a.attr("t");if(c==prevT)b.toggle();else{prevT=c;var d=a.attr("ofs"),e=a.attr("fs"),f=a.attr("fsgap"),g=a.attr("ots"),h=a.attr("ts");a=a.attr("tsgap");$.get("/tsumm?t="+c+"&ofs="+d+"&fs="+e+"&fsgap="+f+"&ots="+g+"&ts="+h+"&tsgap="+a+"&acc=-1&quota=0&ft=0&xs=0&daynum=0",function(a){b.find("td").html(a);tb_init(b.find("a.thickbox"));initTooltip(b.find("td[title],span[title],a[title]"));b.slideDown()})}}
function initInlineCapsules(){$(".srhres,.nrbstn").length&&($(".srhres tr[id],.nrbstn tr").off("click"),$(".srhres tr[id],.nrbstn tr").on("click",function(){$(".rtgusers").hide();var a=$(this).parents("table");if(1==a.attr("single")){a.find("tr,tr span").removeClass("clickhighlighted");a.find(".rowlistingcapsulehalf").hide();var a=$(this).attr("t"),b=$(this).attr("f"),c=$(this).attr("x"),d=/\?.*date=(\d+)/g.exec(location.href),e=0;d&&(e=d[1]);a=location.href.replace(/\?.*/,"")+"?date="+e+"&t="+a+
"&f="+b+"&x="+c+"&kkk="+1*new Date;resetMyDropDowns();window.open(a,"_self")}var f=$(this).next(),a=f.find(".rowlistingcapsulehalf");f.toggle();if(!a.length){f.find("td").html('<div class=rowlistingcapsulehalf ><img src="https://st.indiarailinfo.com/images/ajax-loader.gif" /></div>');var b=f.attr("c"),a=f.attr("t"),c=f.attr("s"),d=f.attr("n"),e=f.attr("ofs"),g=f.attr("fs"),h=f.attr("fsgap"),k=f.attr("ots"),l=f.attr("ts"),n=f.attr("tsgap"),r=$("#AccDateContent-998").val(),p=$("#AccQuota").val(),m=
f.attr("ft"),q=f.attr("xs"),s=f.attr("daynum");b?$.get("/csumm?c="+b+"&fs="+g+"&ts="+l,function(a){f.find("td").html(a);tb_init(f.find("a.thickbox"));initTooltip(f.find("td[title],span[title],a[title]"))}):d?$.get("/nsumm?t="+a+"&s="+c+"&n="+d,function(a){f.find("td").html(a);tb_init(f.find("a.thickbox"));"undefined"!=typeof tb_init&&tb_init(f.find("a.thickbox"));initTooltip(f.find("td[title],span[title],a[title]"))}):$.get("/tsumm?t="+a+"&ofs="+e+"&fs="+g+"&fsgap="+h+"&ots="+k+"&ts="+l+"&tsgap="+
n+"&acc="+r+"&quota="+p+"&ft="+m+"&xs="+q+"&daynum="+s,function(a){f.find("td").html(a);tb_init(f.find("a.thickbox"));initTooltip(f.find("td[title],span[title],a[title]"))})}$(this).toggleClass("clickhighlighted");$(this).find("span").toggleClass("clickhighlighted")}),$(".srhres tr[id],.nrbstn tr").hover(function(){$(this).addClass("hoverhighlighted");$(this).find("span").addClass("hoverhighlighted")},function(){$(this).removeClass("hoverhighlighted");$(this).find("span").removeClass("hoverhighlighted")}),
$("#SearchAccBtn").click(function(a){if(0==$("#AccDateContent-994").val()&&0==$("#AccDateContent-998").val())alert("Please pick a Journey Date"),$("#AccDateBox-994").focus();else{a=$("#AccDateContent-994").val();0==a&&(a=$("#AccDateContent-998").val());var b=$("#SearchAccBtn").attr("url");resetMyDropDowns();window.open(b+"&qt="+$("#AccQuota").val()+"&date="+a+"&kkk="+1*new Date,"_self")}}),$("#SearchAccBtn").length&&srhAcc());$("[name=ClassesOffered]").length&&$("[name=ClassesOffered] td").click(function(){$(this).hasClass("avl")?
$(this).removeClass("avl"):$(this).addClass("avl")})}function closeTrainCapsule(a){$("#TrainCapsule-"+a).slideToggle("fast");$("#Row-"+a).removeClass("clickhighlighted")}function refSrh(){showAppNotice()}
function initTileSel(a){a=a?a.find(".tilesel td"):$(".tilesel td");a.length&&a.click(function(){$(this).hasClass("avl")?$(this).removeClass("avl"):$(this).addClass("avl");var a=0,c=0;$(this).parent().find("td").each(function(){$(this).hasClass("avl")&&(c+=Math.pow(2,a));a++});$(this).parents("table").prev().val(c)})}$(document).ready(function(){document.getElementById("GetPNRStatusBtnn")&&initPNRPage()});
function pnrSearchOnClick(){var a="",b=0,c=0,d=0,e=0,f=0,g=myTrim($("#qBox").val()).replace($("#qBox").attr("label"),"");$("#HashTagContent").length&&(a=$("#HashTagContent").val().replace(/#/g,""));$("#BlogEntryNumber").length&&(b=myTrim($("#BlogEntryNumber").val()).replace($("#BlogEntryNumber").attr("label"),""));var h=$("#PNRNumberSearch").val().replace(/\D/g,""),k=$("#TrainType").val(),l=$("#TrainIDContent").val(),n=$("#FromStationIDContent").val(),r=$("#ToStationIDContent").val(),p=$("#FromDOJContent-").val(),
m=$("#ToDOJContent-").val();$("#BloggerContent").length&&(c=$("#BloggerContent").val().replace(/\|.*/,""));$("#TravellerContent").length&&(d=$("#TravellerContent").val().replace(/\|.*/,""));$("#PredictorContent").length&&(e=$("#PredictorContent").val().replace(/\|.*/,""));$("#StamperContent").length&&(f=$("#StamperContent").val().replace(/\|.*/,""));/^[a-zA-Z0-9]+$/.exec(a)||(a="");var q=0,s=0;$("[name=TrainClass] td").each(function(){$(this).hasClass("avl")&&(s+=Math.pow(2,q));q++});var t=s,s=q=
0;$("[name=PredVal] td").each(function(){$(this).hasClass("avl")&&(s+=Math.pow(2,q));q++});var u=$("#WLQuota").val(),v=s,s=q=0;$("[name=StampVal] td").each(function(){$(this).hasClass("avl")&&(s+=Math.pow(2,q+3));q++});var w=s,x=$("#StampingStatus").val(),y=$("#Reaction").val();10!=h.length&&(h=0);/\d+/.exec(l)||(l=0);/\d+/.exec(n)||(n=0);/\d+/.exec(r)||(r=0);/\d+/.exec(p)||(p=0);/\d+/.exec(m)||(m=0);/\d+/.exec(c)||(c=0);/\d+/.exec(d)||(d=0);/\d+/.exec(e)||(e=0);/\d+/.exec(f)||(f=0);/\d+/.exec(v)||
(v=0);/\d+/.exec(w)||(w=0);/\d+/.exec(x)||(x=0);/\d+/.exec(y)||(y=0);/\d+/.exec(b)&&0!=b?(resetMyDropDowns(),window.open("/pnr/post/"+b+"?kkk="+1*new Date,"_self")):(a="pnr="+h+"&tt="+k+"&t="+l+"&sf="+n+"&st="+r+"&c="+t+"&df="+p+"&dt="+m+"&ub="+c+"&ut="+d+"&up="+e+"&us="+f+"&p="+v+"&wq="+u+"&s="+w+"&ss="+x+"&r="+y+"&h="+a+"&q="+g.replace(/\?|#/g," ")+"&kkk="+1*new Date,1==$("#PNRSearchType").val()?(resetMyDropDowns(),window.open("/pnr/history?"+a,"_self")):(resetMyDropDowns(),window.open("/pnr?"+
a,"_self")))}function pnrFilter(a){var b=location.href.replace(/&?kkk=\d+/,"");/\?/.exec(location.href)||(b+="?");b=/&?f=\d/.exec(b)?b.replace(/&?f=\d/,"&f="+a.val())+"&kkk="+1*new Date:b+("&f="+a.val()+"&kkk="+1*new Date);resetMyDropDowns();window.open(b,"_self")}
function initPNRPage(){var a=document.getElementById("PNRNumber");a.focus();$("#RefPNRBtn").click(function(){showAppNotice()});$("#GetPNRStatusBtn").click(function(){showAppNotice()});$("#PostPNRBtn").click(function(){if($("#AppVersion").length){var a=document.getElementById("PNRNumber"),a=validatePNR(a.value);0!=a&&tb_show(null,"/pnr/predform?p="+a+"&height=500&width=630&modal=false&afterLoad=initPNRPred",null)}});$("#PostPNRBtn1").click(function(){var a=document.getElementById("PNRNumber"),a=validatePNR(a.value);
tb_show(null,"/pnr/predform?p="+a+"&height=500&width=630&modal=false&afterLoad=initPNRPred",null)});$("#moderator").length&&setTimeout(function(){$(".refpnrbtn").trigger("click")},5E3);$("#RefPNRBtnn").click(function(){var a=$("#RefPNRBtnn").attr("p"),c=$("#RefPNRBtnn").attr("tb"),d;d=0==c?$('button.refpnrbtn[p="'+a+'"]'):$('button.refpnrbtn[tb="'+c+'"]');d.after('<span style="color:red;">&nbsp;&nbsp;wait</span>');$.get("/pnr/update?tb="+c+"&p="+a,function(a){d.parents(".latestpnrstatus").html(a)})});
$("#PostPNRBtnn").get(0).onclick=function(){var b=validatePNR(a.value);0!=b&&($("#PostPNRBtnn").after('<span style="color:red;">&nbsp;&nbsp;wait</span>'),$.get("/pnr/update?tb=0&p="+b,function(a){$("#PostPNRBtnn").next().remove();tb_show(null,"/pnr/predform?p="+b+"&height=500&width=630&modal=false&afterLoad=initPNRPred",null)}))};$("#GetPNRStatusBtnn").get(0).onclick=function(){var b=validatePNR(a.value);0!=b&&($("#GetPNRStatusBtnn").after('<span style="color:red;">&nbsp;&nbsp;wait</span>'),$.get("/pnr/update?tb=0&p="+
b,function(a){$("#GetPNRStatusBtnn").next().remove();resetMyDropDowns();window.open("/pnr/status/"+b+"?kkk="+1*new Date,"_self")}))};$("PNRNumber").keydown(function(a){13==getEvent(a).keyCode&&document.getElementById("GetPNRStatusBtnn").click()})}function validatePNR(a){a=a.replace(/\D|\s/g,"");return 10!=a.length?(alert("Please enter a Valid PNR Number in the box."),$("#PNRNumber").focus(),0):a}
function removePNRFromHistory(a,b){$.get("/pnr/RemovePNRFromHistory?PNR="+b+"&kkk="+1*new Date,function(){a.parent().parent().slideUp("fast");showMessageBoxGreen(1,"PNR: "+b+" has been removed from your history.")})}
function initPNRPred(a){var b=a.find("[name=PNRPredForm]").get(0),c=a.find("[name=TrainBlog]").get(0);b.onreset=function(){if(confirm("Your PNR has not been posted yet. Nothing will be saved. Do you really want to exit?"))return tb_remove(),!0;c.focus();return!1};b.onsubmit=function(){var a=c.value.replace(/^\s+|\s+$/,"").substring(0,1E4);c.value=a;if(isSpam(a))return c.focus(),thisFunction=null,!1;if(""!=a)return hideMessageBoxRed(8888),showMessageBoxLoadingNoWaitScreen("8888"),thisFunction=function(){var a=
document.getElementById("formTargetFrame").contentWindow.document,b=document.createElement("div");b.innerHTML=myTrim(a.body.innerHTML);tb_init($(b).find("a.thickbox"));hideMessageBoxLoading(8888);tb_remove();/^1:/.exec(b.innerHTML)?showMessageBoxRed(8888,b.innerHTML.replace(/^1:/g,"")):$("#TrainBlogDivNewBlock").append(b)},!0;c.focus();showMessageBoxRed(8888,"Please type in a comment/question.");thisFunction=null;return!1};a.find("[name=TripDiary]").click(function(){var b=a.find("[name=TrainBlog]"),
c=a.find("[name=TrainBlogExtra]");b.html(b.html()+c.val())})}function refTP(a){a=$("#TPDOJContent-").val();var b=$("#TPDOJSel").val();-5!=b&&(a=b);$("#TPTable").html('<img src="https://st.indiarailinfo.com/images/ajax-loader.gif" />');$.get("/pnr/tp?doj="+a,function(a){$("#TPTable").html(a);initTooltip($("#TPTable").find("a"))})}
function searchNews(){var a=myTrim($("#qBox").val()).replace($("#qBox").attr("label"),""),b=myTrim($("#NewsEntryNumber").val()),c=myTrim($("#UserContent").val().replace(/\|.*/,"")),d=$("#FromDateContent-").val(),e=$("#ToDateContent-").val(),f=$("#NewsCategoryFilter").val(),g=$("#ZoneFilter").val(),h=$("#LangFilter").val(),k=$("#PRFilter").attr("checked")?1:0;/\d+/.exec(b)||(b="");/\d+/.exec(c)||(c=0);/\d+/.exec(d)||(d=0);/\d+/.exec(e)||(e=0);a="?q="+a.replace(/\?|#/g," ")+"&u="+c+"&df="+d+"&dt="+
e+"&c="+f+"&z="+g+"&l="+h+"&pr="+k+"&kkk="+1*new Date;/\d+/.exec(b)&&(a="/post/"+b+"?kkk="+1*new Date);resetMyDropDowns();window.open("/news"+a,"_self")}
function initNewsForm(a){a.find(".mydropdownbox").each(function(){new myDropDown(this)});var b=a.find("[name=NewsAddEditForm]").get(0),c=a.find("[name=NewsHyperlink]").get(0),d=a.find("[name=NewsTitle]").get(0),e=a.find("[name=NewsContent]").get(0);b.onreset=function(){if(!unloadWarning||confirm("Your news item has not been posted yet. Do you really want to cancel?"))return unloadWarning=0,tb_remove(),!0;c.focus();return!1};b.onsubmit=function(){var b=c.value.replace(/^\s+|\s+$/,"").substring(0,255),
g=d.value.replace(/^\s+|\s+$/,"").substring(0,255),h=e.value.replace(/^\s+|\s+$/,"").substring(0,25E3);c.value=b;d.value=g;e.value=h;if(b&&!/^http/i.exec(b))return c.focus(),showMessageBoxRed(111,"News link seems to be invalid. Please check the news link and repost"),thisFunction=null,!1;if(""!=b&&""!=g&&""!=h)return unloadWarning=0,hideMessageBoxRed(111),showMessageBoxLoadingNoWaitScreen(111),thisFunction=function(){var b=document.getElementById("formTargetFrame").contentWindow.document;if("{"==
b.body.innerHTML.replace(/^\s+/,"")[0])b=eval("("+b.body.innerHTML+")"),1==b.Error&&showMessageBoxRed(111,'News Article already exists. Please click here...<br /><a style="color:Yellow;" href=/news/post/'+b.NewsID+">News Post# "+b.NewsID+"</a>");else{var c=a.find("[name=NewsID]").val();0!=c?(divSel=$("#PU-"+c+"-0"),divSel.html(b.body.innerHTML),divSel.css("border","2px solid Red"),tb_init(divSel.find("a.thickbox")),initTooltip(divSel.find("td[title],span[title],a[title]")),initTabMenus(divSel)):(c=
$("#NewsDivNewBlock").html(),$("#NewsDivNewBlock").html(c+b.body.innerHTML),$("#NewsDivNewBlock").css("border","2px solid Red"),$("#NewsAddEditFormContainer").hide(),tb_init($("#NewsDivNewBlock").find("a.thickbox")),initTabMenus($("#NewsDivNewBlock")));tb_remove()}hideMessageBoxLoading(111)},!0;c.focus();showMessageBoxRed(111,"Please fill in all fields, and then press Send");thisFunction=null;return!1};c.focus()}
function deleteNews(a){var b=$(".blogunit[newsID="+a+"]");$.getJSON("/news/RemoveNews?kkk="+1*new Date+"&NewsID="+a,function(a){"0"==a.Error?b&&($(b).find(".blogcontent").css("backgroundColor","#FFB5B5"),b.append(a.Message)):b&&b.append(a.Message)})}
function initNewsSuspend(a){confirm("The Member will be BANNED from the site. He will NOT be able login to the site or post blogs, effective IMMEDIATELY. Please Confirm.")&&$.get("/news/SuspendMember?NewsID="+a+"&kkk="+1*new Date,function(){alert("Thanks.")})}function getNewsTags(a,b){a.is(":visible")?a.slideUp():$.get("/news/GetNewsTags?NewsID="+b+"&kkk="+1*new Date,function(b){a.html(b).slideDown();initTooltip(a.find("a[title]"))})}
function initNewsTag(a){a.find(".mydropdownbox").each(function(){new myDropDown(this)});var b=a.find("[name=TagForm]").get(0);b.onsubmit=function(){var b=a.find("[name=NewsID]").val(),d=a.find("[name=TrainIDNewsComp]").val(),e=a.find("[name=StationIDNewsComp]").val();if(""!=d||""!=e)return thisFunction=function(){var a=document.getElementById("formTargetFrame").contentWindow.document,d=$("#PU-"+b+"-0");d.slideUp().html(a.body.innerHTML).slideDown();"undefined"!=typeof tb_init&&tb_init(d.find("a.thickbox"));
initTooltip(d.find("td[title],span[title],a[title]"));initTabMenus(d)},tb_remove(),!0;a.find("[name=TrainIDNewsTagBox]").focus();return!1};b.onreset=function(){tb_remove()};a.find("[name=TrainIDNewsTagBox]").focus()}
function delNewsTag(a,b,c){confirm("This tag will be removed. Click OK to Continue.")&&$.get("/news/tag/x?n="+a+"&t="+b+"&y="+c+"&kkk="+1*new Date,function(b){var c=$("#PU-"+a+"-0");c.slideUp().html(b).slideDown();"undefined"!=typeof tb_init&&tb_init(c.find("a.thickbox"));initTooltip(c.find("td[title],span[title],a[title]"));initTabMenus(c)})}
function addTrainNewsTag(a,b){$("#TrainIDNewsComp").val($("#TrainIDNewsComp").val()+$("#"+a).val()+":");$("#TrainNameNewsComp").html($("#TrainNameNewsComp").html()+$("#"+b).val().replace(/\/.*/,"")+",");$("#"+a).val("");$("#"+b).val("")}function addStationNewsTag(a,b){$("#StationIDNewsComp").val($("#StationIDNewsComp").val()+$("#"+a).val()+":");$("#StationNameNewsComp").html($("#StationNameNewsComp").html()+$("#"+b).val()+",");$("#"+a).val("");$("#"+b).val("")}
var ms,aa1=document,aa2=window,unloadWarning=0,tabOffset,prevScrollTop=0,orgHyperSrhBox,alertHt,tabHt,orgTabPos,orgRowTop,orgRowLeft,orgTblTop,orgTblLeft;function aa3(a){return aa1.getElementById(a)}function initTooltip(a){a.tooltip({delay:0,showBody:" | ",showURL:!1})}
function myScroll(){alertHt=$("div.alert").outerHeight();var a=$(window).scrollLeft(),b=$(window).scrollTop(),c=$("div.tab").filter(":first");0>=b-(orgTabPos-alertHt)?(c.css("top",orgTabPos-b),$("div.alert").css("width","auto")):(c.css("top",alertHt),0<alertHt&&$("div.alert").css("width","100%"));$("tr.frozenrow").length&&(c=$("tr.frozenrow").filter(":first"),0>=b-(orgRowTop-tabHt-alertHt)?c.css({top:orgRowTop-b,left:orgRowLeft-a}):c.css({top:tabHt+alertHt,left:orgRowLeft-a}),c=$("table.frozendate").filter(":first"),
0>=a-orgTblLeft?c.css({top:orgTblTop-b,left:orgTblLeft-a}):c.css({top:orgTblTop-b,left:0}));100>Math.abs($(window).scrollTop()-prevScrollTop)||(prevScrollTop=$(window).scrollTop(),0.1<1*$(window).scrollTop()/$(document).height()?($(".scrollbtntop").slideDown(),$(".scrollbtnbot").slideUp()):($(".scrollbtntop").slideUp(),$(".scrollbtnbot").slideDown()))}
function initTabMenus(a){a=a?a.find(".tab,.subtab,.baretab"):$(".tab,.subtab,.baretab");a.find("a").mouseenter(function(){var a=$(this).next();if(a.hasClass("menu")&&!a.is(":visible")){if($(this).parents("div.tab").length)var c=this.offsetLeft,d=$(this).parents("div.tab").filter(":first").outerHeight();else for(var c=this.offsetLeft,d=this.offsetTop+this.offsetHeight,e=this;e.offsetParent;)e=e.offsetParent,c+=e.offsetLeft,d+=e.offsetTop;a.css("left",c+"px");a.css("top",d+"px");a.show();$(this).attr("left",
0)}});a.find(".menu").mouseenter(function(){$(this).prev().attr("left",0)});a.find(".menu td").click(function(a){$(this).parents(".menu").hide();""!=$(this).attr("pref")&&(resetMyDropDowns(),window.open($(this).attr("pref"),"_self"));cancelBubble(a)});a.find(".menu td").hover(function(){$(this).parent().hasClass("menudisabled")||$(this).addClass("colhl")},function(){$(this).parent().hasClass("menudisabled")||$(this).removeClass("colhl")});a.find("a,.menu").mouseleave(function(a){var c=$(this);c.hasClass("menu")&&
(c=$(this).prev());var d=c.next();d.hasClass("menu")&&d.is(":visible")&&(c.attr("left",1),setTimeout(function(){1==c.attr("left")&&(c.next().hide(),cancelBubble(a))},50))})}
function init(){$("#LoginForm,#SignupForm,#ReActivationForm").length&&myInitLoginScreen();$("#EmbeddedVideoLink").length&&playVideo();initTooltip($("button[title],input.focustextbox,input.blurtextbox,tr[title],td[title],span[title],a[title]"));$("div.menu div").mouseenter(function(){$(this).parent().find("div").removeClass("rowhl");$(this).addClass("rowhl")});$(window).scroll(function(){myScroll()});$(".scrollbtntop").length&&$(".scrollbtntop").click(function(){$(window).scrollTop(0)});$(".scrollbtnbot").length&&
$(".scrollbtnbot").click(function(){$(window).scrollTop($(document).height())});$(".stntrndiv").length&&initStnTrn();initTabMenus();$(".mydropdownbox").each(function(){new myDropDown(this)});$(".mydatebox").each(function(){new myDate(this)});$("#FilterTripButtonBox").length&&$("#FilterTripButtonBox").click(function(){$("#FilterTripButtonBox").attr("trainID");var a=$("#FilterTripFromStationContent").val().replace(/\|.*$/,""),b=$("#FilterTripFromStationContent").val().replace(/^.*\|/,""),c=$("#FilterTripToStationContent").val().replace(/\|.*$/,
""),d=$("#FilterTripToStationContent").val().replace(/^.*\|/,"");""==a||""==c?(showMessageBoxRed(2,"Please Select a From Station and a To Station"),$("#FilterTripFromStationBox").focus()):1*b==1*d?(showMessageBoxRed(2,"Departure and Arrival Stations cannot be the same. Please change."),$("#FilterTripFromStationBox").focus()):1*b>1*d?(showMessageBoxRed(2,"Stations are in opposite order. Please change."),$("#FilterTripFromStationBox").focus()):(b=location.pathname.replace(/\?.*/g,"").replace(/\/([a-z0-9-])+-([a-z0-9-])+\//g,
"/").replace(/(\/[a-z]*\/([a-z]*\/)?\d*)\/.*/g,"$1"),b+="/"+a+"/"+c+"?kkk="+1*new Date,resetMyDropDowns(),window.open(b,"_self"))});initInlineCapsules();initSchInlineCapsules();initAddTrainForm();initTileSel();initLS();tabHt=$("div.shadowtab").outerHeight();orgTabPos=$("div.shadowtab").offset().top;$("tr.frozenrow").length&&(orgRowTop=$("tr.shadowrow").offset().top,orgRowLeft=$("tr.shadowrow").offset().left,orgTblTop=$("td.shadowdate").offset().top+2,orgTblLeft=$("td.shadowdate").offset().left+5);
myScroll()}window.onbeforeunload=function(){if(unloadWarning)return"Your changes have not been saved yet. Do you really want to leave?"};
function initFeedback(a){var b=a.find("[name=fbForm]").get(0),c=a.find("[name=Feedback]").get(0);c.onkeyup=function(){unloadWarning=1};b.onsubmit=function(){var a=c.value.replace(/^\s+|\s+$/,"").substring(0,4E3);c.value=a;if(/http/.exec(a))return showMessageBoxRed(9999,"Sorry!! Hyperlinks cannot be included in the post. Remove hyperlinks and then re-post"),thisFunction=null,!1;if(""!=a)return unloadWarning=0,c.value=a+" "+location.pathname.replace(RegExp("/","g"),"-"),showMessageBoxGreen(0,"Thank you. Your feedback will be very useful in maintaining this site."),
thisFunction=null,tb_remove(),!0;c.focus();showMessageBoxRed(9999,"Please type in something, and then press Send");thisFunction=null;return!1};b.onreset=function(){if(!unloadWarning||confirm("Your comment has not been posted yet. Do you really want to cancel?"))return unloadWarning=0,tb_remove(),!0;c.focus();return!1};c.focus()}
function setBannerTime(){var a=1*$("#MS").val()+6E4*((new Date).getTimezoneOffset()+330);setInterval(function(){a+=1E3;var b=new Date(a),c=b.getHours().toString(),d=b.getMinutes().toString(),b=b.getSeconds().toString();1==c.length&&(c="0"+c);1==d.length&&(d="0"+d);1==b.length&&(b="0"+b);$("#TS2").html(c+":"+d+":"+b+" IST")},1E3)}$(document).ready(function(){setBannerTime();init()});var thisPage,thisFunction;
function getCookie(a){for(var b=document.cookie.split(";"),c=0;c<b.length;c++){var d=b[c].substr(0,b[c].indexOf("=")),e=b[c].substr(b[c].indexOf("=")+1),d=d.replace(/^\s+|\s+$/g,"");if(d==a)return decodeURIComponent(e)}return null}function setCookie(a,b){if(!a||!b)return!1;var c=new Date((new Date).getTime()+31536E6);document.cookie=a+"="+escape(b)+";domain=.indiarailinfo.com;path=/;expires="+c.toGMTString()}
function initLS(){if("undefined"!=typeof window.localStorage&&getLS("CacheVersion")!=$("#CacheVersion").val()){for(var a in localStorage)/shtml/.exec(a)&&remLS(a),remLS("/bp");putLS("CacheVersion",$("#CacheVersion").val())}}function getLS(a){return a?"undefined"!=typeof window.localStorage?window.localStorage[a]?waltz.wtl(window.localStorage[a]):null:null:null}
function putLS(a,b){if(a&&b&&"undefined"!=typeof window.localStorage)try{return window.localStorage[a]=waltz.wlt(b),!0}catch(c){return!1}else return!1}function remLS(a){if(!a)return null;"undefined"!=typeof window.localStorage&&window.localStorage.removeItem(a)}function isLS(){return"undefined"!=typeof window.localStorage?!0:!1}function showMessageBoxGreen(a,b){""!=b&&($("#MessageRedBox-"+a).hide(),$("#MessageLoadingBox-"+a).hide(),$("#MessageGreenBox-"+a).html(b).show())}
function hideMessageBoxGreen(a){$("#MessageGreenBox-"+a).html("").hide()}function showMessageBoxRed(a,b){""!=b&&($("#MessageGreenBox-"+a).hide(),$("#MessageLoadingBox-"+a).hide(),$("#MessageRedBox-"+a).html(b).show())}function hideMessageBoxRed(a){$("#MessageRedBox-"+a).html("").hide()}function showMessageBoxLoadingNoWaitScreen(a){$("#MessageGreenBox-"+a).hide();$("#MessageRedBox-"+a).hide();$("#MessageLoadingBox-"+a).show()}function hideMessageBoxLoading(a){$("#MessageLoadingBox-"+a).hide()}
function playVideo(a,b){null==a?swfobject.embedSWF("http://www.youtube.com/v/"+document.getElementById("EmbeddedVideoLink").getAttribute("InitialVideoLink")+"&rel=0&color1=0xFFEC8E&color2=0xFFEC8E&border=0","EmbeddedVideoLink","425","345","9.0.0","expressInstall.swf",!1,{menu:"true",play:"true"},!1):(document.getElementById("EmbeddedVideoName").innerHTML=b,swfobject.embedSWF("http://www.youtube.com/v/"+a+"&rel=0&color1=0xFFEC8E&color2=0xFFEC8E&border=0","EmbeddedVideoLink","425","345","9.0.0","expressInstall.swf",
!1,{menu:"true",play:"true"},!1))}function getEvent(a){return a?a:window.event}function getTarget(a){return a&&a.target?a.target:window.event.srcElement}function displayNone(a){a.style.display="none"}function displayBlock(a){a.style.display="block"}function displayInline(a){a.style.display="inline"}function getDisplay(a){return a.style.display}function visibilityHidden(a){a.style.visibility="hidden"}function visibilityVisible(a){a.style.visibility="visible"}
function getVisibility(a){return a.style.visibility}function cancelBubble(a){window.event?window.event.cancelBubble=!0:a&&(a.stopPropagation?a.stopPropagation():a.cancelBubble=!0)}
function getNextTrainListPageBare(a,b){a.find("span").parent().hide();a.find("img").parent().show();$.getJSON(b+"&kkk="+1*new Date,function(b){var d=$(".srhres").html();$(".srhres").html(d+b.TableContent);initTooltip($(".srhres").find("td[title],tr[title],span[title],a[title]"));initInlineCapsules();""!=b.ButtonContent?a.html(b.ButtonContent):a.html("")})}
function getNextMemberListPageBare(a,b){a.find("span").parent().hide();a.find("img").parent().show();$.getJSON(b+"?kkk="+1*new Date,function(b){var d=$("#MemberTable").html();$("#MemberTable").html(d+b.TableContent);initTooltip($("#MemberTable").find("td[title],span[title],a[title]"));""!=b.ButtonContent?a.html(b.ButtonContent):a.html("");tb_init($("#MemberTable").find("a.thickbox"))})}function showAppNotice(){$("#AppVersion").length&&tb_show(null,"/appnotice?height=250&width=570",null)}
function myTrim(a){return null==a?"":a.replace(/^\s+|\s+$/,"")}function isSpam(a){return null}function turnOffAds(a){a.parent().parent().slideUp();$.get("/noads?kkk="+1*new Date)}
var swapOld=function(){if(orgHyperSrhBox){var a=$("#HyperSrhBox").parent();a.html(orgHyperSrhBox);orgHyperSrhBox=null;a.find(".mydropdownbox").each(function(){new myDropDown(this)});a.find(".mydatebox").each(function(){new myDate(this)});initStnTrn();initTileSel($("#HyperSrhBox"))}},expandAdv=function(a){a||swapOld();a=$("#ChgSrhDiv");var b=a.prev(),c=$("input.stntrnboxleft").parents("td");a.css("left",c.offset().left+"px");a.css("top",b.offset().top+b.outerHeight()+"px");a.width(b.offset().left-
c.offset().left+b.outerWidth()-22);a.slideToggle();$("input.stntrnboxleft").focus()};function resetMyDropDowns(){$(".mydropdownbox").find(".stntrncontent").val("");$(".mydropdownbox").find(".mycontent").val("");$(".mydatebox").find(".mycontent").val("")};
